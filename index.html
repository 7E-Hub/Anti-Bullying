<!DOCTYPE html>
<html lang="en">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BEH7L835MN"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-BEH7L835MN');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>7E Hub: Empower Empathy, Engage Everyone</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400..900&family=Roboto+Mono:wght@300;500;700&family=Bebas+Neue&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
    /* Base Variables and Resets - HIGH CONTRAST HACKER THEME (BRIGHTER) */
    :root {
        --font-heading: 'Orbitron', sans-serif;
        --font-body: 'Roboto Mono', monospace;
        --font-background-word: 'Bebas Neue', sans-serif;
        --bg-color: #000000; /* Literal Black (Primary Page Background) */
        --box-bg-color: #000000; /* Literal Black (FOR ALL CONTENT BOXES) */
        --text-color: #ffffff; /* Pure White text */
        --muted: #aaffff; /* Very bright Light Cyan for supporting text */
        --border-color: rgba(0, 255, 255, 0.9); /* BRIGHT Neon Cyan border */
        --accent1: #00ffff; /* PRIMARY BRIGHT Neon Cyan */
        --accent2: #ff00ff; /* SECONDARY BRIGHT Electric Magenta */
        --panel-border: rgba(255, 0, 255, 0.8); /* Magenta border for panels */
        --max-width: 1200px;
    }
    * { box-sizing: border-box; }
    body {
        font-family: var(--font-body);
        background-color: var(--bg-color);
        background-image: radial-gradient(circle at top, rgba(0, 255, 255, 0.1) 1%, transparent 70%); 
        color: var(--text-color);
        margin: 0;
        padding: 0;
        line-height: 1.6;
        overflow-x: hidden;
        position: relative;
    }
    h1, h2, h3, h4 {
        font-family: var(--font-heading);
        font-weight: 800;
        line-height: 1.2;
        margin-top: 0;
        color: var(--accent1); 
    }
    h1 { 
        font-size: clamp(2.5rem, 5vw, 3.8rem); 
        text-shadow: 0 0 15px var(--accent1), 0 0 30px rgba(0, 255, 255, 0.8); 
        color: var(--text-color);
    }
    h2 { font-size: clamp(2rem, 3.5vw, 2.5rem); margin-bottom: 0.5em; }
    h3 { color: var(--accent2); }
    .muted { color: var(--muted); }
    
    /* SCROLL REVEAL EFFECT */
    .reveal {
        opacity: 0;
        transform: translateY(40px);
        transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        will-change: opacity, transform;
    }
    .reveal.visible {
        opacity: 1;
        transform: translateY(0);
    }

    /* Floating Compliments - MOVEMENT AND STYLING */
    .floating-compliments {
        position: fixed;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        overflow: hidden;
        z-index: 10; /* LOW Z-INDEX for background elements */
        pointer-events: none;
    }

    /* Diagonal Glide Animation */
    @keyframes diagonal-glide {
        0% { transform: translate(var(--x-start), var(--y-start)); }
        100% { transform: translate(var(--x-end), var(--y-end)); }
    }

    .floating-compliments div {
        position: absolute;
        color: var(--accent2); /* BRIGHT MAGENTA */
        font-family: var(--font-background-word); 
        font-weight: 400;
        opacity: 0.75; 
        text-shadow: 0 0 18px rgba(255, 0, 255, 1); /* BRIGHTER Magenta Maxed glow */
        white-space: nowrap;
        user-select: none;
        animation: diagonal-glide infinite alternate ease-in-out; 
        font-size: clamp(25px, 4vw, 40px); 
    }
    
    /* Navigation - Dark, Glowing Bar */
    .site {
        position: sticky;
        top: 0;
        z-index: 100;
        background: var(--bg-color); /* Black */
        backdrop-filter: blur(10px); 
        border-bottom: 3px solid var(--accent1); 
        padding: 15px 8%;
        box-shadow: 0 0 20px rgba(0, 255, 255, 1); 
    }
    
    /* Panels and Glassmorphism - Core Style (Solid Black Background) */
    .section {
        padding: 60px 8%;
        max-width: var(--max-width);
        margin: 30px auto; 
        background: var(--box-bg-color); /* SOLID BLACK */
        border: 1px solid var(--border-color);
        border-radius: 12px;
        box-shadow: 0 0 35px rgba(0, 255, 255, 0.6); 
        position: relative; 
        z-index: 20; /* üî• FIX: This ensures the section content is above the z-index:10 floating words */
    }

    .panel {
        padding: 24px;
        background: var(--box-bg-color); /* SOLID BLACK */
        border-radius: 8px;
        border: 1px solid var(--panel-border); 
        box-shadow: inset 0 0 12px rgba(0, 255, 255, 0.6); 
        transition: all 0.3s ease;
        position: relative; 
        z-index: 12;
    }

    /* Utility Classes (Buttons) - Maxed Glow Buttons */
    .btn {
        padding: 10px 20px;
        border-radius: 4px; 
        font-weight: 700; 
        font-size: 0.9rem;
        background: linear-gradient(90deg, var(--accent1), var(--accent2));
        box-shadow: 0 0 25px rgba(0, 255, 255, 1), 0 0 15px rgba(255, 0, 255, 0.8); 
        color: #000;
        border: none;
        cursor: pointer;
    }

    .btn-ghost {
        padding: 10px 20px;
        border-radius: 4px;
        font-weight: 700; 
        font-size: 0.9rem;
        background: transparent;
        color: var(--accent1);
        border: 1px solid var(--accent1);
        box-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        transition: all 0.3s ease;
        cursor: pointer;
    }

    /* Resource Showcase (Game Panel) - Text Beside Image */
    .game-panel {
        display: grid;
        grid-template-columns: 2fr 1fr; 
        gap: 20px;
        margin-bottom: 30px;
        padding: 24px;
        background: var(--box-bg-color); /* SOLID BLACK */
        border: 2px solid var(--accent2); 
        box-shadow: 0 0 20px rgba(255, 0, 255, 0.7); 
        border-radius: 8px;
        cursor: pointer;
        transition: transform 0.3s;
    }

    .game-panel:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(255, 0, 255, 0.8);
    }

    .game-panel-image img {
        width: 100%;
        height: auto;
        border-radius: 6px;
        object-fit: cover;
        aspect-ratio: 16 / 9;
        border: 1px solid var(--accent1);
        box-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
    }

    /* FAQ Accordion Item Panel - Corrected Background & added open class style */
    .faq-item .panel {
         background: var(--box-bg-color); /* SOLID BLACK */
         max-height: 0;
         overflow: hidden;
         transition: max-height 0.4s ease-out;
         padding: 0 24px;
    }
    .faq-item.open .panel {
        max-height: 500px; /* Large enough value to show content */
        padding: 24px;
    }
    .faq-item.open .faq-question span:last-child {
        transform: rotate(45deg); /* Change + to X on open */
    }


    /* ======================================================= */
    /* === MOBILE RESPONSIVENESS MEDIA QUERIES (FIXES) === */
    /* ======================================================= */

    /* Tablet/Mobile Layouts (Max 1024px for Hero and Nav) */
    @media (max-width: 1024px) {
        /* 1. HERO SECTION STACKING */
        .hero-inner {
            flex-direction: column; /* Stack left and right parts vertically */
            align-items: stretch !important;
        }
        .hero-right {
            max-width: 100% !important; /* Forces the side panel to take full width */
            margin-top: 30px;
        }
        .hero-left {
            padding-right: 0 !important;
            max-width: 100% !important;
        }

        /* 2. NAVIGATION BAR (The main fix) */
        .site { padding: 15px 5%; }
        .nav-inner {
            justify-content: space-between !important;
        }
        .primary { /* Hide desktop navigation links */
            display: none !important;
        }
        .nav-toggle-btn { /* Show hamburger menu button */
            display: block !important;
        }
        
        /* Mobile Menu Styles (The hidden vertical menu) */
        .mobile-menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(8px);
            z-index: 90;
            display: none; /* Crucial: MUST be hidden by default */
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity 0.3s ease;
        }
        .mobile-menu-overlay.open {
            display: flex; /* This is what makes it appear on small screens */
        }
        .mobile-menu-overlay a, .mobile-menu-overlay button {
            font-size: 1.5rem;
            margin: 15px 0;
            color: var(--text-color);
            font-family: var(--font-heading);
            text-shadow: 0 0 10px var(--accent1);
            transition: color 0.2s;
        }
        .mobile-menu-overlay a:hover {
            color: var(--accent1);
        }
        .mobile-menu-overlay .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--accent2);
            color: #000;
            font-size: 1.2rem;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
        }
    }


    /* Smaller Mobile Screens (Max 768px for Resource Panel) */
    @media (max-width: 768px) {
        .section {
            padding: 40px 5%;
            margin: 15px auto;
        }
        .game-panel {
            grid-template-columns: 1fr; /* Stack content and image vertically */
        }
        .game-panel-image {
            margin-top: 15px;
        }
        h1 {
            font-size: clamp(2rem, 8vw, 3.5rem); 
        }
        .nav-inner .brand div {
            font-size: 1.4rem !important; /* Smaller logo text */
        }
        /* Footer stacking */
        footer div {
            flex-direction: column;
            text-align: center;
        }
    }
</style>
</head>
<body>

    <div class="floating-compliments" aria-hidden="true">
    </div>

    <div id="mobileMenu" class="mobile-menu-overlay" aria-hidden="true">
        <button class="close-btn" onclick="toggleMobileMenu()">CLOSE (X)</button>
        <a href="#home" onclick="scrollToSection('home'); toggleMobileMenu()">HOME</a>
        <a href="#resources" onclick="scrollToSection('resources'); toggleMobileMenu()">RESOURCES</a>
        <a href="#pledge" onclick="scrollToSection('pledge'); toggleMobileMenu()">PLEDGE</a>
        <a href="#testimonials" onclick="scrollToSection('testimonials'); toggleMobileMenu()">REVIEWS</a>
        <a href="#faq" onclick="scrollToSection('faq'); toggleMobileMenu()">FAQ</a>
        <button class="cta btn" style="margin-top:20px;" onclick="openPledgeModal(); toggleMobileMenu()">MAKE A PLEDGE</button>
    </div>

    <nav class="site" role="navigation" aria-label="Main">
        <div class="nav-inner" style="display:flex;justify-content:space-between;align-items:center;max-width:var(--max-width);margin:0 auto;">
            <div class="brand" style="align-items:center;gap:10px;display:flex;">
                <img src="https://placehold.co/44x44/00ffff/000000?text=7E" alt="7E Hub Logo" style="height:44px; width:auto; border-radius:10px; box-shadow:0 0 10px var(--accent1);" onerror="this.onerror=null; this.src='https://placehold.co/44x44/00ffff/000000?text=7E';">
                <div>
                    <div style="font-weight:900; color:var(--accent1); font-size:1.8rem; line-height:1; font-family:var(--font-heading); text-shadow:0 0 5px var(--accent1);">7E Hub</div>
                    <div style="font-size:11px;color:var(--muted);font-family:var(--font-body); line-height:1;">Empower ‚Ä¢ Engage ‚Ä¢ Empathy</div>
                </div>
            </div>

            <div class="primary" style="display:flex; gap:20px; align-items:center; font-family:var(--font-body);">
                <a href="#home" class="text-sm transition" onclick="scrollToSection('home')">HOME</a>
                <a href="#resources" class="text-sm transition" onclick="scrollToSection('resources')">RESOURCES</a>
                <a href="#pledge" class="text-sm transition" onclick="scrollToSection('pledge')">PLEDGE</a>
                <a href="#testimonials" class="text-sm transition" onclick="scrollToSection('testimonials')">REVIEWS</a>
                <a href="#faq" class="text-sm transition" onclick="scrollToSection('faq')">FAQ</a>
                <button class="cta btn" style="padding:8px 15px; border-radius:4px; font-weight:700; font-size:0.9rem;" onclick="openPledgeModal()">MAKE A PLEDGE</button>
            </div>
            
            <button class="nav-toggle-btn" style="background:none; border:none; color:var(--accent1); font-size:1.5rem; cursor:pointer; display:none;" onclick="toggleMobileMenu()">‚ò∞</button>
        </div>
    </nav>

    <header id="home" class="hero" role="banner" aria-label="Hero">
        <div class="section reveal" style="margin-top: 20px;"> 
            <div class="hero-inner" style="display:flex;gap:30px;align-items:center;padding:20px 0;">
                <div class="hero-left" style="flex: 1.5 1 500px; max-width: 800px; padding-right:10px">
                    <div id="dynamicChallenge" class="panel reveal" style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding:12px;cursor:pointer; border:1px solid var(--accent2); box-shadow:0 0 15px rgba(255, 0, 255, 0.5);" onclick="handleChallengeClick()">
                        <div style="display:flex;align-items:center;gap:10px;">
                            <div style="font-size:1.5rem; color:var(--accent2); text-shadow:0 0 5px var(--accent2);">‚ú®</div>
                            <div class="challenge-text" id="challengeQuestion" style="font-weight:500;font-size:0.95rem; color: var(--text-color); font-family:var(--font-body);">Daily Affirmation: Loading kindness thought...</div>
                        </div>
                        <button class="btn-min" style="background:var(--accent1);border:none;color:#000;padding:6px 15px;border-radius:4px;font-size:0.8rem;font-weight:700;transition:background 0.2s; box-shadow:0 0 10px rgba(0, 255, 255, 0.7);" onclick="handleChallengeClick(event)">REFLECT</button>
                    </div>
                    <h1 class="hero-title glow" style="font-family:var(--font-heading);">7E Hub ‚Äî EMPOWERING EMPATHY, ENGAGING EVERYONE</h1>
                    <p class="hero-sub muted text-lg" style="color:var(--muted); font-family:var(--font-body);">A safe space and resource platform built to foster kindness, resilience, and a network dedicated to standing up against bullying.</p>
                    <div class="hero-cta" style="margin-top:24px; display:flex; gap:15px; flex-wrap:wrap;">
                        <button class="btn" onclick="scrollToSection('resources')" style="font-family:var(--font-body);">FIND RESOURCES</button>
                        <button class="btn-ghost" onclick="scrollToSection('mission')" style="font-family:var(--font-body);">OUR MISSION</button>
                    </div>
                    <div style="display:flex;gap:12px;margin-top:30px; border-top:1px solid rgba(0, 255, 255, 0.5); padding-top:20px;">
                        
                        <div style="flex:1">
                            <div style="color:var(--muted);font-size:13px; font-family:var(--font-body);">DIGITAL GUIDES</div>
                            <div style="font-weight:700;font-size:24px; color:var(--accent1); text-shadow:0 0 10px var(--accent1); font-family:var(--font-heading);">3 and more coming up</div>
                        </div>
                    </div>
                </div>

                <aside class="hero-right panel" style="flex: 1 1 300px; max-width: 420px; min-height: 200px;" aria-hidden="true">
                    <div style="display:flex;gap:12px;align-items:center;border-bottom:1px solid rgba(255, 0, 255, 0.5);padding-bottom:15px;">
                        <div style="flex:1">
                            <div class="muted" style="font-size:13px; color:var(--muted); font-family:var(--font-body);">MENTAL WELLNESS CHECK</div>
                            <div style="font-weight:700;font-size:18px; color:var(--accent2); font-family:var(--font-heading);">BOOST YOUR RESILIENCE TODAY</div>
                        </div>
                        <div style="text-align:right;">
                            <div class="muted" style="font-size:12px; color:var(--muted); font-family:var(--font-body);">TIME COMMITMENT</div>
                            <div style="font-weight:700;color:var(--accent1);font-size:16px; font-family:var(--font-heading);">5 MINUTES</div>
                        </div>
                    </div>
                    <div style="margin-top:15px;display:grid;gap:15px;">
                        <div style="display:flex;gap:12px;align-items:center;background:var(--box-bg-color);padding:12px;border-radius:8px;cursor:pointer;transition:background 0.2s; border: 1px solid var(--accent1);" onclick="openDemo('Empathy Guide')">
                            <div style="width:50px;height:50px;border-radius:8px;background:linear-gradient(135deg,var(--accent1),#00e676);display:flex;align-items:center;justify-content:center;font-weight:800;font-size:1.5rem; box-shadow:0 0 12px rgba(0, 255, 255, 0.8);">ü§ù</div>
                            <div>
                                <div class="muted small" style="color:var(--muted);">QUICK READ</div>
                                <div style="font-weight:700; color:var(--text-color); font-family:var(--font-body);">THE EMPATHY GUIDE: CONFLICT</div>
                            </div>
                        </div>
                        <div style="display:flex;gap:12px;align-items:center;background:var(--box-bg-color);padding:12px;border-radius:8px;cursor:pointer;transition:background 0.2s; border: 1px solid var(--accent2);" onclick="openDemo('Resilience Exercises')">
                            <div style="width:50px;height:50px;border-radius:8px;background:linear-gradient(135deg,var(--accent2),#ffcc80);display:flex;align-items:center;justify-content:center;font-weight:800;font-size:1.5rem; box-shadow:0 0 12px rgba(255, 0, 255, 0.8);">üß†</div>
                            <div>
                                <div class="muted small" style="color:var(--muted);">BOOST YOUR SPIRIT</div>
                                <div style="font-weight:700; color:var(--text-color); font-family:var(--font-body);">DAILY RESILIENCE EXERCISES</div>
                            </div>
                        </div>
                    </div>
                </aside>
                </div>
        </div>
    </header>

    <section id="mission" class="section reveal" aria-label="Our Mission" style="padding: 60px 8% 30px;">
        <h2>OUR CORE MISSION</h2>
        <p class="muted max-w-3xl" style="color:var(--muted); font-family:var(--font-body);">We provide tools for resilience and connection for anyone affected by bullying, ensuring no one has to face it alone. Our goal is to shift bystander culture into one of active allyship and support.</p>

        
        <div class="card-grid" style="margin-top:30px; display:flex; gap:20px; flex-wrap: wrap; justify-content:center;">
            <div class="card reveal panel" style="flex: 1 1 300px; border-color:var(--accent2);">
                <h3 style="color:var(--accent2);font-size:1.5rem; font-family:var(--font-heading);">EMPOWERMENT TOOLS</h3>
                <p class="muted" style="color:var(--muted); font-family:var(--font-body);">Access practical guides and scripts for standing up for yourself and advocating for others safely.</p>
            </div>
            <div class="card reveal panel" style="flex: 1 1 300px; border-color:var(--accent2);">
                <h3 style="color:var(--accent2);font-size:1.5rem; font-family:var(--font-heading);">RESILIENCE BUILDING</h3>
                <p class="muted" style="color:var(--muted); font-family:var(--font-body);">Interactive exercises and support resources focused on mental and emotional strength.</p>
            </div>
            <div class="card reveal panel" style="flex: 1 1 300px; border-color:var(--accent2);">
                <h3 style="color:var(--accent2);font-size:1.5rem; font-family:var(--font-heading);">COMMUNITY PLEDGES</h3>
                <p class="muted" style="color:var(--muted); font-family:var(--font-body);">Join thousands of users committed to kindness and zero-tolerance for bullying through action pledges.</p>
            </div>
        </div>
    </section>

    <section id="resources" class="section reveal" style="border-color: var(--accent1); padding: 30px 8% 60px;">
        <h2>THE 7E HUB RESOURCE CENTER</h2>
        <p class="muted max-w-3xl" style="color:var(--muted); font-family:var(--font-body);">Explore our curated collection of guides, toolkits, and interactive exercises designed to equip you with the knowledge to respond effectively to bullying.</p>

        <div style="margin-top:30px">
            
            <div class="game-panel reveal" onclick="openDemo('The Power to Stop Bullying')">
                <div class="game-panel-content">
                    <h3 class="text-2xl" style="color:var(--accent1); font-family:var(--font-heading);">THE POWER TO STOP BULLYING: LESSONS FROM ADWITI‚ÄôS STORY</h3>
                    <p class="muted" style="color:var(--muted); font-family:var(--font-body);">An in-depth article analyzing the skit and TEDx talk, focusing on confidence, smart responses, and the power of bystanders.</p>
                    <div style="margin-top:16px">
                        <button class="btn" style="padding:10px 20px; font-family:var(--font-body);">READ FULL ARTICLE</button>
                    </div>
                </div>
                <div class="game-panel-image" id="image-adwiti-container">
                    <img id="image-adwiti" src="adwiti.jpg" alt="Illustration of student gaining confidence" loading="lazy" style="display:block;">
                </div>
            </div>

            <div class="game-panel reveal" onclick="openDemo('Bullying Talk Article')">
                <div class="game-panel-content">
                    <h3 class="text-2xl" style="color:var(--accent1); font-family:var(--font-heading);">HOW TO AVOID BULLYING AND WHY IT HAPPENS: TIPS FROM OUR TEDx SPEAKERS</h3>
                    <p class="muted" style="color:var(--muted); font-family:var(--font-body);">Tips from our speakers, Vedant and Nived on how to confront bullying, including the four reasons it happens and three ways to stop it.</p>
                    <div style="margin-top:16px">
                        <button class="btn" style="padding:10px 20px; font-family:var(--font-body);">ACCESS DOCUMENT</button>
                    </div>
                    </div>
                <div class="game-panel-image" id="image-allies-container">
                    <img id="image-allies" src="parents.jpg" alt="Illustration of parent and child talking" loading="lazy" style="display:block;">
                </div>
            </div>

            <div class="game-panel reveal" onclick="openDemo('Assembly Summary')">
                <div class="game-panel-content">
                    <h3 class="text-2xl" style="color:var(--accent1); font-family:var(--font-heading);">7E'S ASSEMBLY SUMMARY: EMPATHY & ACTION</h3>
                    <p class="muted" style="color:var(--muted); font-family:var(--font-body);">A breakdown of the key points from our latest school assembly focusing on empathy, respect, and intervention strategies.</p>
                    <div style="margin-top:16px">
                        <button class="btn" style="padding:10px 20px; font-family:var(--font-body);">READ SUMMARY</button>
                    </div>
                </div>
                <div class="game-panel-image" id="image-empathy-container">
                    <img id="image-empathy" src="empathy.jpg" alt="Illustration of two people shaking hands" loading="lazy" style="display:block;">
                </div>
            </div>

            <div class="game-panel reveal" onclick="openDemo('Resilience Exercises')">
                <div class="game-panel-content">
                    <h3 class="text-2xl" style="color:var(--accent1); font-family:var(--font-heading);">THE RESILIENCE TOOLKIT: MENTAL WELLNESS</h3>
                    <p class="muted" style="color:var(--muted); font-family:var(--font-body);">A collection of exercises, like 5-4-3-2-1 grounding and positive self-talk scripting, to build and maintain emotional strength during challenging times.</p>
                    <div style="margin-top:16px">
                        <button class="btn-ghost" style="padding:10px 20px; font-family:var(--font-body);">VIEW EXERCISES</button>
                    </div>
                </div>
                <div class="game-panel-image" id="image-resilience-container">
                    <img id="image-resilience" src="mental.jpg" alt="Illustration of mental wellness/brain" loading="lazy" style="display:block;">
                </div>
            </div>

        </div>
    </section>

    <section id="pledge" style="background-color: var(--background); padding: 60px 20px; text-align: center; color: var(--text-color);">
    
    <h2 class="text-4xl font-extrabold mb-4" style="font-family: var(--font-heading); color: var(--accent1);">
        JOIN THE <span style="color: var(--accent2);">MOVEMENT</span>
    </h2>
    
    <p class="text-xl text-gray-400 mb-8 max-w-2xl mx-auto">
        Every **pledge**, no matter how small, adds up to a global **wave of empathy**. Commit to **kindness** today and see the total count grow instantly!
    </p>

    <div style="margin-bottom: 30px; padding: 20px; background: rgba(255, 255, 255, 0.05); border-radius: 12px; display: inline-block; box-shadow: 0 4px 10px rgba(0,0,0,0.2);">
        <div id="pledgeCounter" class="counter"
     style="font-size:4.5rem; font-family:var(--font-heading); font-weight:900; color:var(--accent2); line-height: 1; margin-bottom:-5px;">
    0
</div>
        <p class="text-lg text-gray-400 font-bold mt-2">Total Kindness Pledges Committed</p>
    </div>

    <div style="margin-bottom: 40px; color: var(--text-color);">
        <p class="text-2xl font-bold" style="color: var(--text-color);">
            Our Goal: <span style="color: var(--accent1); font-size: 1.5em; font-weight: 900;">250,000</span> Pledges
        </p>
    </div>

    <div class="mt-6">
        <button onclick="openPledgeModal()" id="commitPledgeButton" class="btn btn-primary" style="padding: 15px 35px; font-size: 1.25rem; font-weight: 700; background-color: var(--accent1); color: black; border: none; border-radius: 8px; cursor: pointer; transition: background-color 0.3s;">
            COMMIT YOUR PLEDGE NOW
        </button>
    </div>

</section>
	<div id="pledgeModal" class="modal-overlay" aria-hidden="true" style="display: none;">
    <div class="modal-content" style="background-color: var(--background2); border-radius: 12px; max-width: 500px; padding: 30px; position: relative;">
        
        <button onclick="closePledgeModal()" class="modal-close-btn" aria-label="Close Pledge Form" 
                style="position: absolute; top: 15px; right: 15px; font-size: 1.5rem; line-height: 1; color: var(--text-color); background: none; border: none; cursor: pointer;">
            &times;
        </button>

        <h3 class="text-3xl font-extrabold mb-4" style="font-family: var(--font-heading); color: var(--accent1);">
            Your Kindness Pledge
        </h3>
        
        <p class="text-gray-400 mb-6">
            Commit to one action you will take to promote empathy or stand up against unkindness today.
        </p>

        <textarea id="pledgeInput" 
                  maxlength="200" 
                  placeholder="Example: 'I pledge to listen to a friend without interrupting today.'"
                  style="width: 100%; height: 120px; padding: 15px; border-radius: 8px; border: 1px solid var(--gray-700); background-color: var(--background); color: var(--text-color); resize: none;"></textarea>

        <div class="flex justify-between text-sm text-gray-500 mt-2">
            <p style="color: var(--text-color);">Minimum 10 characters required.</p>
            <p>Characters Remaining: <span id="pledgeCharCount">200</span></p>
        </div>

        <button onclick="submitPledge()" class="btn" style="margin-top: 25px; width: 100%; padding: 15px; font-size: 1.1rem; font-weight: 700; background-color: var(--accent1); color: black; border: none; border-radius: 8px; cursor: pointer;">
            SUBMIT MY PLEDGE
        </button>

        <p class="text-xs text-gray-500 mt-4">
            *Your pledge is anonymous and will only count toward the global total.
        </p>

    </div>
</div>

<div id="demoModal" class="modal-overlay" aria-hidden="true" style="display: none;">
    <div class="modal-content" style="background-color: var(--background2); border-radius: 12px; max-width: 700px; padding: 30px; position: relative;">
        <button onclick="closeDemo()" class="modal-close-btn" aria-label="Close Resource" 
                style="position: absolute; top: 15px; right: 15px; font-size: 1.5rem; line-height: 1; color: var(--text-color); background: none; border: none; cursor: pointer;">
            &times;
        </button>
        <div id="demoContent" class="overflow-y-auto" style="max-heiFFght: 80vh;">
            </div>
    </div>
</div>

<style>
    .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 100; /* Must be higher than all other content */
    }
</style>
	

    <section id="testimonials" class="section reveal" style="border-color: var(--accent1);">
    <h2>SUPPORTER TESTIMONIALS</h2>
    <div class="reviews-container" style="display:grid; grid-template-columns:repeat(auto-fit, minmax(280px, 1fr)); gap:20px; margin-top:20px;">
        <div class="review-card reveal panel" style="border-color: var(--accent1);">
            <h4 class="font-bold text-xl" style="color:var(--accent1); font-family:var(--font-heading);">Nived N</h4>
            <p style="color:var(--text-color); font-family:var(--font-body);">‚Äú7E Hub gave me the courage to talk about what was happening. I felt truly heard and supported through the tools.‚Äù</p>
            <div style="color:var(--muted); font-size:0.9rem; font-family:var(--font-body);">‚Äî SAFE SPACE USER</div>
        </div>
        <div class="review-card reveal panel" style="border-color: var(--accent1);">
            <h4 class="font-bold text-xl" style="color:var(--accent1); font-family:var(--font-heading);">Vedant S.</h4>
            <p style="color:var(--text-color); font-family:var(--font-body);">‚ÄúThe Empathy Guide helped me understand how to be a better friend to someone struggling. It changed my approach entirely.‚Äù</p>
            <div style="color:var(--muted); font-size:0.9rem; font-family:var(--font-body);">‚Äî EMPOWERMENT SUPPORTER</div>
        </div>
        <div class="review-card reveal panel" style="border-color: var(--accent1);">
            <h4 class="font-bold text-xl" style="color:var(--accent1); font-family:var(--font-heading);">KSHITHIJ</h4>
            <p style="color:var(--text-color); font-family:var(--font-body);">‚ÄúThe Resilience Toolkit made a difficult time clear and easy to follow. It provided necessary mental strength.‚Äù</p>
            <div style="color:var(--muted); font-size:0.9rem; font-family:var(--font-body);">‚Äî INVALUABLE TOOL</div>
        </div>
        <div class="review-card reveal panel" style="border-color: var(--accent1);">
            <h4 class="font-bold text-xl" style="color:var(--accent1); font-family:var(--font-heading);"></h4>
            <p style="color:var(--text-color); font-family:var(--font-body);">‚ÄúIt's amazing how much difference a simple daily affirmation can make when you're feeling isolated.‚Äù</p>
            <div style="color:var(--muted); font-size:0.9rem; font-family:var(--font-body);">‚Äî POSITIVE IMPACT</div>
        </div>
    </div>
    </section>

    <section id="faq" class="section reveal" style="border-color: var(--accent2);">
        <h2>FREQUENTLY ASKED QUESTIONS</h2>
        <div class="faq max-w-4xl mx-auto" role="list" style="margin-top:20px;">
            <div class="faq-item">
                <button class="faq-question" aria-expanded="false" style="width:100%; text-align:left; padding:18px 0; background:none; border:none; color:var(--accent2); font-size:1.1rem; font-weight:700; display:flex; justify-content:space-between; align-items:center; cursor:pointer; border-bottom:1px solid rgba(255, 0, 255, 0.5); font-family:var(--font-body);"><span style="color:var(--accent2);">How can I find support if I feel isolated?</span> <span style="font-size:1.5rem; transform:rotate(0); transition:transform 0.3s; color:var(--accent2);">+</span></button>
                <div class="panel" style="color:var(--muted); font-family:var(--font-body);">Our platform is designed to provide **tools for resilience and connection**. Utilize the **Resilience Toolkit** for immediate techniques, and remember to speak to a trusted adult.</div>
            </div>
            <div class="faq-item">
                <button class="faq-question" aria-expanded="false" style="width:100%; text-align:left; padding:18px 0; background:none; border:none; color:var(--accent2); font-size:1.1rem; font-weight:700; display:flex; justify-content:space-between; align-items:center; cursor:pointer; border-bottom:1px solid rgba(255, 0, 255, 0.5); font-family:var(--font-body);"><span style="color:var(--accent2);">Is 7E Hub an official crisis intervention service?</span> <span style="font-size:1.5rem; transform:rotate(0); transition:transform 0.3s; color:var(--accent2);">+</span></button>
                <div class="panel" style="color:var(--muted); font-family:var(--font-body);">No, **7E Hub is a resource and empowerment platform**. If you are in immediate danger, please contact your local emergency services or a dedicated crisis hotline.</div>
            </div>
            

            <div class="faq-item"><button class="faq-question" aria-expanded="false" style="width:100%; text-align:left; padding:18px 0; background:none; border:none; color:var(--accent2); font-size:1.1rem; font-weight:700; display:flex; justify-content:space-between; align-items:center; cursor:pointer; border-bottom:1px solid rgba(255, 0, 255, 0.5); font-family:var(--font-body);"><span style="color:var(--accent2);">What does 7E stand for?</span> <span style="font-size:1.5rem; transform:rotate(0); transition:transform 0.3s; color:var(--accent2);">+</span></button><div class="panel" style="color:var(--muted); font-family:var(--font-body);">The seven Es: **Engage, Empower, Empathize, Educate, Embrace, Encourage, and End Bullying**.</div></div>
            <div class="faq-item"><button class="faq-question" aria-expanded="false" style="width:100%; text-align:left; padding:18px 0; background:none; border:none; color:var(--accent2); font-size:1.1rem; font-weight:700; display:flex; justify-content:space-between; align-items:center; cursor:pointer; border-bottom:1px solid rgba(255, 0, 255, 0.5); font-family:var(--font-body);"><span style="color:var(--accent2);">Can parents and educators access resources?</span> <span style="font-size:1.5rem; transform:rotate(0); transition:transform 0.3s; color:var(--accent2);">+</span></button><div class="panel" style="color:var(--muted); font-family:var(--font-body);">Yes ‚Äî the **Adult Allies Portal** is specifically designed with tools and guides for parents and educators to support their children and students.</div></div>
        </div>
    </section>

    <footer role="contentinfo" style="padding:40px 8%;background:#000000;border-top:3px solid var(--accent1);margin-top:18px; position: relative; z-index: 10;">
        <div style="max-width:var(--max-width);margin:0 auto;display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
            <div style="font-family:var(--font-heading); font-weight:700; color:var(--accent1);">¬© 2025 7E HUB ‚Äî BUILDING A KINDER WORLD.</div>
            <div style="color:#a0a0a0;font-size:13px;font-family:var(--font-body);">CONFIDENTIALITY ASSURED ‚Ä¢ SAFE SPACE ‚Ä¢ BUILT FOR YOU</div>
        </div>
    </footer>

    <div id="demoModal" style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:120">
        <div style="position:absolute;inset:0;background:rgba(0,0,0,0.9)" onclick="closeDemo()"></div>
        <div style="width:92%;max-width:1000px;background:var(--box-bg-color);border-radius:12px;padding:24px;border:2px solid var(--accent1);position:relative;z-index:121;max-height:90vh;overflow-y:auto; font-family:var(--font-body); box-shadow:0 0 20px rgba(0, 255, 255, 0.5);">
            <button style="position:absolute;right:18px;top:18px;padding:8px 12px;border-radius:4px;background:var(--accent1);border:0;color:#000;font-size:0.9rem; font-family:var(--font-body); z-index:10;" onclick="closeDemo()">CLOSE (ESC)</button>
            <div id="demoContent" style="min-height:260px;padding-top:20px; color:var(--text-color);"></div>
        </div>
    </div>
    
    <div id="pledgeModal" style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:120">
        <div style="position:absolute;inset:0;background:rgba(0,0,0,0.9)" onclick="closePledgeModal()"></div>
        <div class="panel" style="width:90%;max-width:500px;position:relative;z-index:121;text-align:center; font-family:var(--font-body); border-color:var(--accent2);">
            <h3 class="text-2xl" style="color:var(--accent2); margin-bottom:10px; font-family:var(--font-heading);">YOUR KINDNESS PLEDGE</h3>
            <p class="muted" style="margin-bottom:20px; color:var(--muted);">What action do you pledge to take to make the world a kinder place?</p>

            <textarea id="pledgeInput" placeholder="E.g., I pledge to check in on a friend who seems isolated." 
                style="width:100%; height:100px; padding:12px; background:#111; border:1px solid var(--accent1); border-radius:4px; color:var(--text-color); resize:vertical; outline:none; font-family:var(--font-body);"
                maxlength="200"></textarea>
            
            <p class="small muted" style="text-align:right; margin-top:5px; color:var(--muted);"><span id="pledgeCharCount">200</span> CHARACTERS LEFT</p>

            <button class="btn" style="margin-top:15px; width:100%; font-family:var(--font-body);" onclick="submitPledge()">COMMIT PLEDGE</button>
            <button class="btn-ghost" style="margin-top:10px; width:100%; font-family:var(--font-body);" onclick="closePledgeModal()">CANCEL</button>
        </div>
    </div>

    <script>
    // -------------------------------------------------------------
    // UTILITIES & CORE LOGIC (Defined in global scope for HTML access)
    // -------------------------------------------------------------

    function scrollToSection(id) {
        const el = document.getElementById(id);
        if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    function toggleMobileMenu() {
        const mobileMenu = document.getElementById('mobileMenu');
        if (!mobileMenu) return;

        const isOpen = mobileMenu.classList.toggle('open');
        mobileMenu.setAttribute('aria-hidden', isOpen ? 'false' : 'true');
        document.body.style.overflow = mobileMenu.classList.contains('open') ? 'hidden' : '';
    }

    function openPledgeModal() {
        const modal = document.getElementById('pledgeModal');
        modal.style.display = 'flex';
        modal.setAttribute('aria-hidden', 'false');
        document.getElementById('pledgeInput').value = '';
        document.getElementById('pledgeCharCount').textContent = '200';
        document.body.style.overflow = 'hidden';
        setTimeout(() => document.getElementById('pledgeInput').focus(), 100);

        if (document.getElementById('mobileMenu')?.classList.contains('open')) {
            toggleMobileMenu();
        }
    }

    function closePledgeModal() {
        const modal = document.getElementById('pledgeModal');
        modal.style.display = 'none';
        modal.setAttribute('aria-hidden', 'true');
        // Only restore body scrolling if the other modal is also closed
        if (document.getElementById('demoModal').style.display === 'none') {
            document.body.style.overflow = '';
        }
    }

    function closeDemo() {
        const modal = document.getElementById('demoModal');
        modal.style.display = 'none';
        modal.setAttribute('aria-hidden', 'true');
        document.getElementById('demoContent').innerHTML = '';
        // Only restore body scrolling if the pledge modal is also closed
        if (document.getElementById('pledgeModal').style.display === 'none') {
            document.body.style.overflow = '';
        }
    }

    // This function is needed to show success/error messages
    function showTempMessage(message, color) {
        let msgEl = document.getElementById('tempMessage');
        if (!msgEl) {
            msgEl = document.createElement('div');
            msgEl.id = 'tempMessage';
            msgEl.style.cssText = 'position:fixed; bottom:20px; right:20px; background:' + color + '; color:black; padding:15px 25px; border-radius:4px; z-index:150; opacity:0; transition:opacity 0.4s ease-out, transform 0.4s ease-out; transform:translateY(20px); font-weight:600; box-shadow:0 6px 15px rgba(0,0,0,0.3); font-family:var(--font-body);';
            document.body.appendChild(msgEl);
        }
        msgEl.style.backgroundColor = color;
        msgEl.textContent = message;
        msgEl.style.opacity = '1';
        msgEl.style.transform = 'translateY(0)';

        setTimeout(() => {
            msgEl.style.opacity = '0';
            msgEl.style.transform = 'translateY(20px)';
            setTimeout(() => msgEl.remove(), 500);
        }, 3000);
    }

    function setupPledgeInput() {
        const input = document.getElementById('pledgeInput');
        const counter = document.getElementById('pledgeCharCount');
        if (input && counter) {
            input.addEventListener('input', () => {
                const remaining = 200 - input.value.length;
                counter.textContent = remaining;
            });
        }
    }

    // **Dynamic Challenge Logic**
    const challenges = [
        { q: "DAILY AFFIRMATION: **YOU ARE STRONG.** YOUR VOICE MATTERS.", a: "SPEAK UP, YOU ARE NEVER ALONE." },
        { q: "DAILY AFFIRMATION: **CHOOSE KINDNESS.** YOU HAVE THE POWER TO CHANGE SOMEONE'S DAY.", a: "KINDNESS IS A STRENGTH, NOT A WEAKNESS." },
        { q: "DAILY AFFIRMATION: **EMPATHY IS SEEING WITH THE EYES OF ANOTHER.**", a: "TRY TO UNDERSTAND, EVEN WHEN IT'S HARD." },
        { q: "DAILY AFFIRMATION: **YOUR WORTH IS DEFINED BY YOU, NOT OTHERS.**", a: "BELIEVE IN YOURSELF, ALWAYS." },
        { q: "DAILY AFFIRMATION: **REACH OUT.** THERE IS ALWAYS SOMEONE WHO CARES AND WANTS TO HELP.", a: "HELP IS AVAILABLE 24/7." }
    ];
    let currentChallengeIndex = 0;
    let isShowingQuestion = true;
    let cycleInterval;

    function cycleChallenge() {
        const questionEl = document.getElementById('challengeQuestion');
        const challengeBar = document.getElementById('dynamicChallenge');
        if (!questionEl || !challengeBar) return;

        const btn = challengeBar.querySelector('.btn-min');

        if (isShowingQuestion) {
            const currentQ = challenges[currentChallengeIndex].q;
            questionEl.innerHTML = currentQ.replace(/\*\*(.*?)\*\*/g, '<span class="text-white font-extrabold" style="color:var(--text-color);">$1</span>');
            btn.textContent = 'ACTION';
        } else {
            const currentA = challenges[currentChallengeIndex].a;
            questionEl.innerHTML = '<span class="muted" style="color:var(--accent1);font-weight:700;">TAKE ACTION: </span>' + currentA;
            btn.textContent = 'NEXT';
            currentChallengeIndex = (currentChallengeIndex + 1) % challenges.length;
        }
        isShowingQuestion = !isShowingQuestion;
    }

    function startDynamicChallenge() {
        cycleInterval = setInterval(cycleChallenge, 7000);
        cycleChallenge();
    }

    function handleChallengeClick(e) {
        if (e) e.stopPropagation();
        clearInterval(cycleInterval);
        cycleChallenge();
        cycleInterval = setInterval(cycleChallenge, 7000);
    }


    // **Functions that require openDemo logic (must be in global scope)**
    function openDemo(name) {
        const modal = document.getElementById('demoModal');
        const content = document.getElementById('demoContent');
        modal.style.display = 'flex';
        modal.setAttribute('aria-hidden', 'false');

        let contentHTML = '';
        let title = name;
        let externalUrl = '';

        // --- ELONGATED GUIDE CONTENT START ---
        if (name === 'The Power to Stop Bullying') {
            title = 'The Power to Stop Bullying: Lessons from Adwiti‚Äôs Story';
            externalUrl = 'https://hub.7e.com/articles/adwitis-story';
            contentHTML = `<h3 style="font-family:var(--font-heading);" class="text-4xl font-extrabold text-cyan-400 mb-6 border-b pb-3 border-gray-700">${title}</h3>
                <p class="muted mb-8 text-lg" style="color:var(--muted); font-style: italic;">How one student found her voice, and how you can find yours too.</p>

                <p class="text-gray-300 mb-6">In the assembly, we saw Adwiti face a tough challenge with a classmate named Deeksha. Adwiti‚Äôs story shows us that bullying isn't just about one person‚Äîit's about confidence, the power of bystanders, and knowing **why** people bully in the first place.</p>

                <h4 style="font-family:var(--font-heading);" class="text-2xl font-bold mt-8 mb-3 text-cyan-400">Why Does Bullying Start? (The 4 Reasons)</h4>
                <p class="text-gray-300">As Vedant and Nived shared in the TEDx talk, a bully's actions usually come from a place of their own trouble, not your fault. Here are the main drivers:</p>
                <ul class="list-disc list-inside text-gray-300 mt-3 pl-4 mb-6">
                    <li>**Stress:** They lash out because they can‚Äôt handle their own bad feelings.</li>
                    <li>**Attention:** They feel ignored, so they try to get noticed in a negative, powerful way.</li>
                    <li>**Chain Reaction:** Someone bullied might try to regain power by picking on another person.</li>
                    <li>**Jealousy:** They try to tear down someone they envy, like Adwiti who was smarter in class.</li>
                </ul>

                <h4 style="font-family:var(--font-heading);" class="text-2xl font-bold mt-8 mb-3 text-cyan-400">Your Three Best Defenses</h4>
                <p class="text-gray-300">When Adwiti finally stood up to Deeksha, she used the core strategies that break the cycle of bullying. Remember these three moves:</p>
                <ol class="list-decimal list-inside text-gray-300 mt-3 pl-4 mb-6">
                    <li>**Confidence:** As Adwiti learned from her mom, you must stand tall and believe in your own worth. A bully looks for panic; deny them that reward.</li>
                    <li>**Calmness:** Keep your voice steady. Don't panic. Bullies want a big, emotional reaction‚Äîdon't give it to them.</li>
                    <li>**Smart Questions:** When Adwiti firmly asked, **"Why do you care so much about everything I do?"** she turned the tables. This simple question makes the bully explain their toxic behavior and often leaves them speechless.</li>
                </ol>

                <h4 style="font-family:var(--font-heading);" class="text-2xl font-bold mt-8 mb-3 text-cyan-400">The Power of the Bystander (Like Akash)</h4>
                <p class="text-gray-300">The most important lesson is that bullying cannot survive without an audience. In Scene 7, Deeksha was stopped not just by Adwiti, but by the **silence and glares** of the bystanders who refused to support her. As Nived shared: </p>
                <ul class="list-disc list-inside text-gray-300 mt-3 pl-4 mb-6">
                    <li>**Silence is Approval:** Every time you laugh or look away, you help the bully.</li>
                    <li>**Support is Action:** When you stand with the victim, like Akash did, you isolate the bully and take away their power.</li>
                </ul>

                <div class="mt-8 text-center"><p class="text-xl font-bold text-white mb-4">You have the power to be **Unstoppable** (just like the song says). Remember: **Confidence, Calmness, Smart Responses, and Support.**</p></div>`;
        } else if (name === 'Bullying Talk Article') {
            title = 'TEDx Speakers: How to Avoid Bullying and Why It Happens';
            externalUrl = 'https://hub.7e.com/articles/tedx-speakers-guide';
            contentHTML = `<h3 style="font-family:var(--font-heading);" class="text-4xl font-extrabold text-cyan-400 mb-6 border-b pb-3 border-gray-700">${title}</h3>
                <p class="muted mb-8 text-lg" style="color:var(--muted); font-style: italic;">Tips from our speakers, Vedant and Nived on how to confront bullying.</p>

                <h4 style="font-family:var(--font-heading);" class="text-2xl font-bold mt-8 mb-3 text-cyan-400">The Core of Bullying (Four Reasons)</h4>
                <p class="text-gray-300 mb-4">Bullying is often an aggressor's way of dealing with their own issues. The four main drivers are: **Stress, Attention, Chain Reaction, and Jealousy**.</p>
                
                <h4 style="font-family:var(--font-heading);" class="text-2xl font-bold mt-8 mb-3 text-cyan-400">Three Ways to Stop Bullying (For the Target)</h4>
                <p class="text-gray-300 mb-4">Bullies feed on panic. Your calm reaction takes away their power:</p>
                <ol class="list-decimal list-inside text-gray-300 mt-3 pl-4 mb-6">
                    <li>**Confidence:** Stand tall, be confident, and believe in yourself.</li>
                    <li>**Calmness:** Stay calm. Deny them the reward of a big reaction.</li>
                    <li>**Smart Responses:** Turn the tables by firmly asking a question like, **"Why do you care about me?"**</li>
                </ol>

                <h4 style="font-family:var(--font-heading);" class="text-2xl font-bold mt-8 mb-3 text-cyan-400">The Crucial Role of the Bystander</h4>
                <p class="text-gray-300">Bystanders have the ultimate power to stop the cycle. When you refuse to laugh or stay silent, you isolate the bully and remove their power.</p>`;
        } else if (name === 'Assembly Summary') {
            title = '7E‚Äôs Assembly Summary: Empathy & Action';
            externalUrl = 'https://hub.7e.com/resources/assembly-summary';
            contentHTML = `<h3 style="font-family:var(--font-heading);" class="text-4xl font-extrabold text-cyan-400 mb-6 border-b pb-3 border-gray-700">${title}</h3><p class="muted mb-6 text-lg" style="color:var(--muted);">A breakdown of the key points from our latest school assembly focusing on empathy, respect, and intervention strategies.</p><h4 style="font-family:var(--font-heading);" class="text-2xl font-bold mt-8 mb-3 text-cyan-400">1. THE POWER OF ENGAGEMENT</h4><p class="text-gray-300">We discussed how engagement‚Äîbeing present and supportive‚Äîis the first step against passive bullying culture. It's about showing up for your peers.</p><h4 style="font-family:var(--font-heading);" class="text-2xl font-bold mt-8 mb-3 text-cyan-400">2. EMPATHY IN ACTION</h4><p class="text-gray-300">The core message was using empathy not just to understand, but to act. When you see someone struggling, imagine yourself in their shoes and choose to be an ally.</p><h4 style="font-family:var(--font-heading);" class="text-2xl font-bold mt-8 mb-3 text-cyan-400">3. REPORTING IS RESPONSIBILITY</h4><p class="text-gray-300">We reiterated the importance of using school channels to report bullying safely and confidentially. Reporting is not "snitching"; it's responsible protection of the school community.</p>`;
        } else if (name === 'Resilience Exercises') {
            title = 'The Resilience Toolkit: Mental Wellness';
            externalUrl = 'https://hub.7e.com/toolkit/resilience';
            contentHTML = `<h3 style="font-family:var(--font-heading);" class="text-4xl font-extrabold text-cyan-400 mb-6 border-b pb-3 border-gray-700">${title.toUpperCase()}: BUILDING YOUR INNER STRENGTH</h3><p class="muted mb-6 text-lg" style="color:var(--muted);">Resilience is a learned skill. Use these quick exercises daily to build emotional stability and mental toughness.</p><h4 style="font-family:var(--font-heading);" class="text-2xl font-bold mt-8 mb-3 text-cyan-400">1. 5-4-3-2-1 GROUNDING TECHNIQUE (1 MINUTE)</h4><p class="text-gray-300">A sensory exercise to pull you into the present moment when stress hits. (**5** things you can SEE, **4** things you can FEEL, **3** things you can HEAR, **2** things you can SMELL, **1** thing you can TASTE.)</p><h4 style="font-family:var(--font-heading);" class="text-2xl font-bold mt-8 mb-3 text-cyan-400">2. POSITIVE SELF-TALK SCRIPTING (2 MINUTES)</h4><p class="text-gray-300">Counter negative internal dialog with prepared, positive affirmations:</p><div class="text-lg text-white font-mono mt-3 bg-gray-800 p-4 rounded-lg border border-cyan-500/50">"I AM CAPABLE. THIS FEELING IS TEMPORARY. I AM STRONG ENOUGH TO HANDLE THIS."</div>`;
        } else if (name === 'Empathy Guide') {
            title = 'The Empathy Guide: Conflict Resolution';
            externalUrl = 'https://hub.7e.com/guides/empathy-conflict';
            contentHTML = `<h3 style="font-family:var(--font-heading);" class="text-4xl font-extrabold text-cyan-400 mb-6 border-b pb-3 border-gray-700">${title}</h3><p class="muted mb-6 text-lg" style="color:var(--muted);">A short guide on how to approach conflicts with empathy to find constructive solutions, not just assign blame.</p><h4 style="font-family:var(--font-heading);" class="text-2xl font-bold mt-8 mb-3 text-cyan-400">1. LISTEN TO UNDERSTAND, NOT TO REPLY</h4><p class="text-gray-300">The first step is active listening. Focus on the other person's perspective, even if you disagree. This helps de-escalate emotional responses.</p><h4 style="font-family:var(--font-heading);" class="text-2xl font-bold mt-8 mb-3 text-cyan-400">2. VALIDATE FEELINGS, ADDRESS BEHAVIOR</h4><p class="text-gray-300">Acknowledge that their feelings are real ("I hear that you are frustrated"), but firmly address unacceptable behavior. Feelings are valid; harmful actions are not.</p>`;
        }

        content.innerHTML = `
            <div style="font-family: var(--font-body); padding: 10px;">
                <h2 class="text-3xl font-extrabold text-white mb-2" style="font-family:var(--font-heading);">${title}</h2>
                <p class="text-lg text-red-400 mb-6 font-bold" style="color:var(--accent2);">Redirecting to External Resource Page...</p>
                <div class="p-4 rounded-lg border border-gray-700 bg-gray-900 mb-8">
                    <p class="text-sm muted">External URL:</p>
                    <p class="text-lg font-mono text-cyan-400">${externalUrl}</p>
                </div>
                
                ${contentHTML}

                <div class="mt-8 text-center">
                    <a href="${externalUrl}" target="_blank" class="btn" style="padding:15px 30px; font-size:1.1rem; display:inline-block; text-decoration:none; font-family:var(--font-body);">OPEN EXTERNAL DOCUMENT</a>
                </div>
            </div>
        `;

        document.body.style.overflow = 'hidden';

        if (document.getElementById('mobileMenu')?.classList.contains('open')) {
            toggleMobileMenu();
        }
    }

    // **Other Setup/Interaction Logic**
    (function randomizeCompliments() {
        const container = document.querySelector('.floating-compliments');
        const totalCompliments = 70;
        const compliments = [
            "KINDNESS", "STRONG", "EMPATHY", "ALLY", "VALUABLE",
            "BRAVE", "HEARD", "SEEN", "WORTHY", "RESILIENT",
            "SAFE", "LOVE", "SUPPORT", "HOPE", "ACTION", "VOICE",
            "GROW", "TRUST", "VALUE", "SHINE", "POWER", "CARE", "HEAL",
            "PEACE", "TRUTH"
        ];

        for (let i = 0; i < totalCompliments; i++) {
            const complimentText = compliments[Math.floor(Math.random() * compliments.length)];
            let div = document.createElement('div');
            div.textContent = complimentText;

            const startX = Math.random() * 100;
            const startY = Math.random() * 100;

            const movementRange = 30;
            const endX = startX + (Math.random() * movementRange - movementRange / 2);
            const endY = startY + (Math.random() * movementRange - movementRange / 2);

            div.style.left = `${startX}vw`;
            div.style.top = `${startY}vh`;

            div.style.setProperty('--x-start', '0');
            div.style.setProperty('--y-start', '0');
            div.style.setProperty('--x-end', `${(endX - startX)}vw`);
            div.style.setProperty('--y-end', `${(endY - startY)}vh`);

            div.style.animationDuration = `${Math.random() * 10 + 20}s`;
            div.style.animationDelay = `-${Math.random() * 30}s`;

            container.appendChild(div);
        }
    })();

    (function setupInteractions() {
        // Scroll Reveal Logic
        const revealObserver = new IntersectionObserver((entries) => {
            entries.forEach(e => {
                if (e.isIntersecting) {
                    e.target.classList.add('visible');
                    revealObserver.unobserve(e.target);
                }
            });
        }, { threshold: 0.18 });
        document.querySelectorAll('.reveal').forEach(el => revealObserver.observe(el));


        // FAQ Accordion Logic
        document.querySelectorAll('.faq-question').forEach(btn => {
            btn.addEventListener('click', () => {
                const parent = btn.parentElement;
                const isOpen = parent.classList.contains('open');

                document.querySelectorAll('.faq-item.open').forEach(el => {
                    if (el !== parent) {
                        el.classList.remove('open');
                        const qBtn = el.querySelector('.faq-question');
                        if (qBtn) qBtn.setAttribute('aria-expanded', 'false');
                    }
                });

                if (!isOpen) {
                    parent.classList.add('open');
                    btn.setAttribute('aria-expanded', 'true');
                } else {
                    parent.classList.remove('open');
                    btn.setAttribute('aria-expanded', 'false');
                }
            });
        });

        // Keyboard Shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.key === 'r' || e.key === 'R') scrollToSection('resources');
            if (e.key === 'p' || e.key === 'P') scrollToSection('pledge');
            if (e.key === 't' || e.key === 'T') scrollToSection('testimonials');
            if (e.key === 'f' || e.key === 'F') scrollToSection('faq');
            if (e.key === 'Escape') {
                closeDemo();
                closePledgeModal();
                if (document.getElementById('mobileMenu')?.classList.contains('open')) {
                    toggleMobileMenu();
                }
            }
        });
    })();
</script>
    
    <script type="module">
    // -------------------------------------------------------------
    // FIREBASE MODULE SCRIPT (Handles Real-time Data and Submission)
    // -------------------------------------------------------------

    // 1. IMPORT NECESSARY FIREBASE LIBRARIES
    // *** CRITICAL: collection and addDoc are now correctly imported! ***
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, doc, updateDoc, increment, onSnapshot, setDoc, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    // 2. YOUR WEB APP'S FIREBASE CONFIGURATION (Keep this intact)
    const firebaseConfig = {
        apiKey: "AIzaSyBtfjuTXtH86ax7ejGCRbTOiJ7Z0GB7qkM",
        authDomain: "e-hub-55cb3.firebaseapp.com",
        projectId: "e-hub-55cb3",
        storageBucket: "e-hub-55cb3.firebasestorage.app",
        messagingSenderId: "821272803077",
        appId: "1:821272803077:web:2a80cf8c142d3b9fc4296c",
        measurementId: "G-BEH7L835MN"
    };

    // 3. INITIALIZE FIREBASE & FIRESTORE
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // 4. DEFINE FIRESTORE DOCUMENT REFERENCE
    const counterRef = doc(db, 'globalCounters', 'pledgeCounterDoc');

    let currentPledges = 0; // Global variable to hold the latest count

    // 5. CORE PLEDGE LOGIC FUNCTIONS

    /**
     * Updates the HTML elements to show the latest pledge count.
     * This function is called every time the database updates.
     */
    function updatePledgeDisplay() {
        // 1. Primary Counter (in the Pledge section)
        const primaryCounterEl = document.getElementById('pledgeCounter');

        // 2. Secondary Counter (in the Header section)
        const headerCounterEl = document.getElementById('currentPledgeCountHeader');

        // Update the main counter
        if (primaryCounterEl) {
            primaryCounterEl.textContent = currentPledges.toLocaleString();
        }

        // Update the header counter (if you keep it)
        if (headerCounterEl) {
            headerCounterEl.textContent = currentPledges.toLocaleString();
        }

        console.log("Display updated. Current count:", currentPledges);
    }

    /**
     * Submits the pledge, updates the counter, AND saves the pledge text.
     * This function is made available to the global scope via 'window.submitPledge'.
     */
    window.submitPledge = async function() {
        const input = document.getElementById('pledgeInput');
        const pledgeText = input.value.trim();

        if (pledgeText.length < 10) {
            window.showTempMessage("PLEDGE MUST BE AT LEAST 10 CHARACTERS LONG!", '#ff4444');
            return;
        }

        try {
            window.closePledgeModal();
            window.showTempMessage("PROCESSING PLEDGE...", 'var(--accent1)');

            // ----------------------------------------------------
            // A. COUNTER UPDATE (Updates the total count)
            // ----------------------------------------------------
            try {
                await updateDoc(counterRef, {
                    pledgeCount: increment(1)
                });
            } catch (error) {
                // Document not found (first run), so we create it
                if (error.code === 'not-found' || error.message.includes('No document to update')) {
                    await setDoc(counterRef, {
                        pledgeCount: 1
                    });
                } else {
                    throw error;
                }
            }

            // ----------------------------------------------------
            // B. PLEDGE TEXT SAVE (Saves the actual text to a new collection)
            // ----------------------------------------------------
            const pledgesCollectionRef = collection(db, 'userPledges');
            await addDoc(pledgesCollectionRef, {
                pledge: pledgeText,
                timestamp: new Date().toISOString() // Saves when it was submitted
            });
            // ----------------------------------------------------

            window.showTempMessage("THANK YOU! YOUR PLEDGE HAS BEEN REGISTERED.", 'var(--accent1)');

        } catch (error) {
            console.error("Error submitting pledge: ", error);
            window.showTempMessage("PLEDGE ERROR: Check Console/Database setup.", '#ff4444');
        }
    }

    /**
     * Listens in real-time for any changes to the counter in the database.
     */
    function startPledgeListener() {
        // onSnapshot establishes a real-time connection to the document
        onSnapshot(counterRef, (docSnapshot) => {
            if (docSnapshot.exists()) {
                // Get the data and update the global variable
                currentPledges = docSnapshot.data().pledgeCount || 0;
                updatePledgeDisplay(); // Refresh the counter display on the page
            } else {
                // Document not found (first time running), initialize to 0
                currentPledges = 0;
                updatePledgeDisplay();
                console.warn("Pledge Counter Document not found! Counter initialized to 0.");
            }
        }, (error) => {
            console.error("Firestore Listen failed:", error);
        });
    }

    // 6. INITIALIZATION: Start the listener on page load
    document.addEventListener('DOMContentLoaded', () => {
        // These functions are defined in the non-module script block, so they are accessed via window
        window.startDynamicChallenge();
        window.setupPledgeInput();

        // The one that gets the data and updates the display
        startPledgeListener();
    });
</script>
</body>
</html>
