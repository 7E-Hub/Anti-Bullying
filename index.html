<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-BEH7L835MN"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-BEH7L835MN');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>7E Hub: Empower Empathy, Engage Everyone</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400..900&family=Roboto+Mono:wght@300;500;700&family=Bebas+Neue&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Base Variables and Resets - HIGH CONTRAST HACKER THEME (BRIGHTER) */
        :root {
            --font-heading: 'Orbitron', sans-serif;
            --font-body: 'Roboto Mono', monospace;
            --font-background-word: 'Bebas Neue', sans-serif;
            --bg-color: #000000; /* Literal Black (Primary Page Background) */
            --box-bg-color: #000000; /* Literal Black (FOR ALL CONTENT BOXES) */
            --text-color: #ffffff; /* Pure White text */
            --muted: #aaffff; /* Very bright Light Cyan for supporting text */
            --border-color: rgba(0, 255, 255, 0.9); /* BRIGHT Neon Cyan border */
            --accent1: #00ffff; /* PRIMARY BRIGHT Neon Cyan */
            --accent2: #ff00ff; /* SECONDARY BRIGHT Electric Magenta */
            --panel-border: rgba(255, 0, 255, 0.8); /* Magenta border for panels */
            --max-width: 1200px;
        }
        * { box-sizing: border-box; }
        body {
            font-family: var(--font-body);
            background-color: var(--bg-color);
            background-image: radial-gradient(circle at top, rgba(0, 255, 255, 0.1) 1%, transparent 70%); 
            color: var(--text-color);
            margin: 0;
            padding: 0;
            line-height: 1.6;
            overflow-x: hidden;
            position: relative;
        }
        h1, h2, h3, h4 {
            font-family: var(--font-heading);
            font-weight: 800;
            line-height: 1.2;
            margin-top: 0;
            color: var(--accent1); 
        }
        h1 { 
            font-size: clamp(2.5rem, 5vw, 3.8rem); 
            text-shadow: 0 0 15px var(--accent1), 0 0 30px rgba(0, 255, 255, 0.8); 
            color: var(--text-color);
        }
        h2 { font-size: clamp(2rem, 3.5vw, 2.5rem); margin-bottom: 0.5em; }
        h3 { color: var(--accent2); }
        .muted { color: var(--muted); }
        
        /* SCROLL REVEAL EFFECT */
        .reveal {
            opacity: 0;
            transform: translateY(40px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
            will-change: opacity, transform;
        }
        .reveal.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Floating Compliments - MOVEMENT AND STYLING */
        .floating-compliments {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            overflow: hidden;
            z-index: 10; /* LOW Z-INDEX for background elements */
            pointer-events: none;
        }

        /* Diagonal Glide Animation */
        @keyframes diagonal-glide {
            0% { transform: translate(var(--x-start), var(--y-start)); }
            100% { transform: translate(var(--x-end), var(--y-end)); }
        }

        .floating-compliments div {
            position: absolute;
            color: var(--accent2); /* BRIGHT MAGENTA */
            font-family: var(--font-background-word); 
            font-weight: 400;
            opacity: 0.4; 
            text-shadow: 0 0 18px rgba(255, 0, 255, 1); /* BRIGHTER Magenta Maxed glow */
            white-space: nowrap;
            user-select: none;
            animation: diagonal-glide infinite alternate ease-in-out; 
            font-size: clamp(25px, 4vw, 40px); 
        }
        
        /* Navigation - Dark, Glowing Bar */
        .site {
            position: sticky;
            top: 0;
            z-index: 100;
            background: var(--bg-color); /* Black */
            backdrop-filter: blur(10px); 
            border-bottom: 3px solid var(--accent1); 
            padding: 15px 8%;
            box-shadow: 0 0 20px rgba(0, 255, 255, 1); 
        }
        
        /* Panels and Glassmorphism - Core Style (Solid Black Background) */
        .section {
            padding: 60px 8%;
            max-width: var(--max-width);
            margin: 30px auto; 
            background: var(--box-bg-color); /* SOLID BLACK */
            border: 1px solid var(--border-color);
            border-radius: 12px;
            box-shadow: 0 0 35px rgba(0, 255, 255, 0.6); 
            position: relative; 
            z-index: 20;
        }

        .panel {
            padding: 24px;
            background: var(--box-bg-color); /* SOLID BLACK */
            border-radius: 8px;
            border: 1px solid var(--panel-border); 
            box-shadow: inset 0 0 12px rgba(0, 255, 255, 0.6); 
            transition: all 0.3s ease;
            position: relative; 
            z-index: 12;
        }

        /* Utility Classes (Buttons) - Maxed Glow Buttons */
        .btn {
            padding: 10px 20px;
            border-radius: 4px; 
            font-weight: 700; 
            font-size: 0.9rem;
            background: linear-gradient(90deg, var(--accent1), var(--accent2));
            box-shadow: 0 0 25px rgba(0, 255, 255, 1), 0 0 15px rgba(255, 0, 255, 0.8); 
            color: #000;
            border: none;
            cursor: pointer;
        }

        .btn-ghost {
            padding: 10px 20px;
            border-radius: 4px;
            font-weight: 700; 
            font-size: 0.9rem;
            background: transparent;
            color: var(--accent1);
            border: 1px solid var(--accent1);
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        /* Resource Showcase (Game Panel) - Text Beside Image */
        .game-panel {
            display: grid;
            grid-template-columns: 2fr 1fr; 
            gap: 20px;
            margin-bottom: 30px;
            padding: 24px;
            background: var(--box-bg-color); /* SOLID BLACK */
            border: 2px solid var(--accent2); 
            box-shadow: 0 0 20px rgba(255, 0, 255, 0.7); 
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .game-panel:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(255, 0, 255, 0.8);
        }

        .game-panel-image img {
            width: 100%;
            height: auto;
            border-radius: 6px;
            object-fit: cover;
            aspect-ratio: 16 / 9;
            border: 1px solid var(--accent1);
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }

        /* FAQ Accordion Item Panel - Corrected Background & added open class style */
        .faq-item .panel {
             background: var(--box-bg-color); /* SOLID BLACK */
             max-height: 0;
             overflow: hidden;
             transition: max-height 0.4s ease-out;
             padding: 0 24px;
        }
        .faq-item.open .panel {
            max-height: 500px; /* Large enough value to show content */
            padding: 24px;
        }
        .faq-item.open .faq-question span:last-child {
            transform: rotate(45deg); /* Change + to X on open */
        }
        
        /* --- NEW STYLES FOR ANIMATED ARTICLE CONTENT --- */
        
        /* Glowing Text Utility */
        .glowing-text {
            text-shadow: 0 0 8px var(--accent1), 0 0 15px rgba(0, 255, 255, 0.5);
        }

        /* Card Grid for Interactive Points */
        .key-tactics-grid {
            display: grid;
            grid-template-columns: 1fr; /* Default single column for mobile */
            gap: 15px;
            padding-top: 10px;
        }
        @media (min-width: 768px) {
            .key-tactics-grid {
                grid-template-columns: repeat(2, 1fr); /* Two columns on larger screens */
            }
        }
        .tactic-card {
            background-color: rgba(0, 0, 0, 0.4); /* Slightly transparent black */
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--accent1);
            transition: transform 0.4s ease, box-shadow 0.4s ease; /* Animation setup */
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        .tactic-card:hover {
            transform: translateY(-5px) scale(1.02); /* Slight lift and scale on hover */
            box-shadow: 0 10px 25px rgba(0, 255, 255, 0.5); /* BRIGHT Glowing shadow */
        }
        .tactic-title {
            font-family: var(--font-heading);
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 8px;
            color: var(--accent1); /* Use primary accent for titles */
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 5px;
        }
        .tactic-body {
            font-size: 0.95rem;
            color: var(--text-color);
        }

        /* Color variations for extra flair on the left border */
        .tactic-1 { border-left: 5px solid var(--accent1); }
        .tactic-2 { border-left: 5px solid var(--accent2); }
        .tactic-3 { border-left: 5px solid #00ff00; /* Bright Green */ }
        .tactic-4 { border-left: 5px solid #ff44aa; /* Hot Pink */ }

        /* Fix Modal Content Scrolling */
        #demoModal .modal-content {
            background-color: var(--bg-color); /* Ensure the modal content area is fully black */
            border-radius: 12px; 
            max-width: 90%; 
            padding: 0; /* Remove outer padding so content fills container */
            position: relative;
        }
        #demoContent {
            max-height: 95vh;
            overflow-y: auto;
            padding: 40px; /* Add padding here so the content isn't flush */
            background: var(--box-bg-color);
        }

        /* ======================================================= */
        /* === MOBILE RESPONSIVENESS MEDIA QUERIES (FIXES) === */
        /* ======================================================= */

        /* Tablet/Mobile Layouts (Max 1024px for Hero and Nav) */
        @media (max-width: 1024px) {
            /* 1. HERO SECTION STACKING */
            .hero-inner {
                flex-direction: column; /* Stack left and right parts vertically */
                align-items: stretch !important;
            }
            .hero-right {
                max-width: 100% !important; /* Forces the side panel to take full width */
                margin-top: 30px;
            }
            .hero-left {
                padding-right: 0 !important;
                max-width: 100% !important;
            }

            /* 2. NAVIGATION BAR (The main fix) */
            .site { padding: 15px 5%; }
            .nav-inner {
                justify-content: space-between !important;
            }
            .primary { /* Hide desktop navigation links */
                display: none !important;
            }
            .nav-toggle-btn { /* Show hamburger menu button */
                display: block !important;
            }
            
            /* Mobile Menu Styles (The hidden vertical menu) */
            .mobile-menu-overlay {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.95);
                backdrop-filter: blur(8px);
                z-index: 90;
                display: none; /* Crucial: MUST be hidden by default */
                flex-direction: column;
                align-items: center;
                justify-content: center;
                transition: opacity 0.3s ease;
            }
            .mobile-menu-overlay.open {
                display: flex; /* This is what makes it appear on small screens */
            }
            .mobile-menu-overlay a, .mobile-menu-overlay button {
                font-size: 1.5rem;
                margin: 15px 0;
                color: var(--text-color);
                font-family: var(--font-heading);
                text-shadow: 0 0 10px var(--accent1);
                transition: color 0.2s;
            }
            .mobile-menu-overlay a:hover {
                color: var(--accent1);
            }
            .mobile-menu-overlay .close-btn {
                position: absolute;
                top: 20px;
                right: 20px;
                background: var(--accent2);
                color: #000;
                font-size: 1.2rem;
                padding: 10px 15px;
                border-radius: 4px;
                cursor: pointer;
            }
        }


        /* Smaller Mobile Screens (Max 768px for Resource Panel) */
        @media (max-width: 768px) {
            .section {
                padding: 40px 5%;
                margin: 15px auto;
            }
            .game-panel {
                grid-template-columns: 1fr; /* Stack content and image vertically */
            }
            .game-panel-image {
                margin-top: 15px;
            }
            h1 {
                font-size: clamp(2rem, 8vw, 3.5rem); 
            }
            .nav-inner .brand div {
                font-size: 1.4rem !important; /* Smaller logo text */
            }
            /* Footer stacking */
            footer div {
                flex-direction: column;
                text-align: center;
            }
        }
    </style>
</head>
<body>

    <div class="floating-compliments" aria-hidden="true">
    </div>

    <div id="mobileMenu" class="mobile-menu-overlay" aria-hidden="true">
        <button class="close-btn" onclick="toggleMobileMenu()">CLOSE (X)</button>
        <a href="#home" onclick="scrollToSection('home'); toggleMobileMenu()">HOME</a>
        <a href="#resources" onclick="scrollToSection('resources'); toggleMobileMenu()">RESOURCES</a>
        <a href="#pledge" onclick="scrollToSection('pledge'); toggleMobileMenu()">PLEDGE</a>
        <a href="#testimonials" onclick="scrollToSection('testimonials'); toggleMobileMenu()">REVIEWS</a>
        <a href="#faq" onclick="scrollToSection('faq'); toggleMobileMenu()">FAQ</a>
        <button class="cta btn" style="margin-top:20px;" onclick="openPledgeModal(); toggleMobileMenu()">MAKE A PLEDGE</button>
    </div>

    <nav class="site" role="navigation" aria-label="Main">
        <div class="nav-inner" style="display:flex;justify-content:space-between;align-items:center;max-width:var(--max-width);margin:0 auto;">
            <div class="brand" style="align-items:center;gap:10px;display:flex;">
                <img src="https://placehold.co/44x44/00ffff/000000?text=7E" alt="7E Hub Logo" style="height:44px; width:auto; border-radius:10px; box-shadow:0 0 10px var(--accent1);" onerror="this.onerror=null; this.src='https://placehold.co/44x44/00ffff/000000?text=7E';">
                <div>
                    <div style="font-weight:900; color:var(--accent1); font-size:1.8rem; line-height:1; font-family:var(--font-heading); text-shadow:0 0 5px var(--accent1);">7E Hub</div>
                    <div style="font-size:11px;color:var(--muted);font-family:var(--font-body); line-height:1;">Empower • Engage • Empathy</div>
                </div>
            </div>

            <div class="primary" style="display:flex; gap:20px; align-items:center; font-family:var(--font-body);">
                <a href="#home" class="text-sm transition" onclick="scrollToSection('home')">HOME</a>
                <a href="#resources" class="text-sm transition" onclick="scrollToSection('resources')">RESOURCES</a>
                <a href="#pledge" class="text-sm transition" onclick="scrollToSection('pledge')">PLEDGE</a>
                <a href="#testimonials" class="text-sm transition" onclick="scrollToSection('testimonials')">REVIEWS</a>
                <a href="#faq" class="text-sm transition" onclick="scrollToSection('faq')">FAQ</a>
                <button class="cta btn" style="padding:8px 15px; border-radius:4px; font-weight:700; font-size:0.9rem;" onclick="openPledgeModal()">MAKE A PLEDGE</button>
            </div>
            
            <button class="nav-toggle-btn" style="background:none; border:none; color:var(--accent1); font-size:1.5rem; cursor:pointer; display:none;" onclick="toggleMobileMenu()">☰</button>
        </div>
    </nav>

    <header id="home" class="hero" role="banner" aria-label="Hero">
        <div class="section reveal" style="margin-top: 20px;"> 
            <div class="hero-inner" style="display:flex;gap:30px;align-items:center;padding:20px 0;">
                <div class="hero-left" style="flex: 1.5 1 500px; max-width: 800px; padding-right:10px">
                    <div id="dynamicChallenge" class="panel reveal" style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding:12px;cursor:pointer; border:1px solid var(--accent2); box-shadow:0 0 15px rgba(255, 0, 255, 0.5);" onclick="handleChallengeClick()">
                        <div style="display:flex;align-items:center;gap:10px;">
                            <div style="font-size:1.5rem; color:var(--accent2); text-shadow:0 0 5px var(--accent2);">✨</div>
                            <div class="challenge-text" id="challengeQuestion" style="font-weight:500;font-size:0.95rem; color: var(--text-color); font-family:var(--font-body);">Daily Affirmation: Loading kindness thought...</div>
                        </div>
                        <button class="btn-min" style="background:var(--accent1);border:none;color:#000;padding:6px 15px;border-radius:4px;font-size:0.8rem;font-weight:700;transition:background 0.2s; box-shadow:0 0 10px rgba(0, 255, 255, 0.7);" onclick="handleChallengeClick(event)">REFLECT</button>
                    </div>
                    <h1 class="hero-title glow" style="font-family:var(--font-heading);">7E Hub — EMPOWERING EMPATHY, ENGAGING EVERYONE</h1>
                    <p class="hero-sub muted text-lg" style="color:var(--muted); font-family:var(--font-body);">A safe space and resource platform built to foster kindness, resilience, and a network dedicated to standing up against bullying.</p>
                    <div class="hero-cta" style="margin-top:24px; display:flex; gap:15px; flex-wrap:wrap;">
                        <button class="btn" onclick="scrollToSection('resources')" style="font-family:var(--font-body);">FIND RESOURCES</button>
                        <button class="btn-ghost" onclick="scrollToSection('mission')" style="font-family:var(--font-body);">OUR MISSION</button>
                    </div>
                    <div style="display:flex;gap:12px;margin-top:30px; border-top:1px solid rgba(0, 255, 255, 0.5); padding-top:20px;">
                        
                        <div style="flex:1">
                            <div style="color:var(--muted);font-size:13px; font-family:var(--font-body);">DIGITAL GUIDES</div>
                            <div style="font-weight:700;font-size:24px; color:var(--accent1); text-shadow:0 0 10px var(--accent1); font-family:var(--font-heading);">3 and more coming up</div>
                        </div>
                    </div>
                </div>

                <aside class="hero-right panel" style="flex: 1 1 300px; max-width: 420px; min-height: 200px;" aria-hidden="true">
                    <div style="display:flex;gap:12px;align-items:center;border-bottom:1px solid rgba(255, 0, 255, 0.5);padding-bottom:15px;">
                        <div style="flex:1">
                            <div class="muted" style="font-size:13px; color:var(--muted); font-family:var(--font-body);">MENTAL WELLNESS CHECK</div>
                            <div style="font-weight:700;font-size:18px; color:var(--accent2); font-family:var(--font-heading);">BOOST YOUR RESILIENCE TODAY</div>
                        </div>
                        <div style="text-align:right;">
                            <div class="muted" style="font-size:12px; color:var(--muted); font-family:var(--font-body);">TIME COMMITMENT</div>
                            <div style="font-weight:700;color:var(--accent1);font-size:16px; font-family:var(--font-heading);">5 MINUTES</div>
                        </div>
                    </div>
                    <div style="margin-top:15px;display:grid;gap:15px;">
                        <div style="display:flex;gap:12px;align-items:center;background:var(--box-bg-color);padding:12px;border-radius:8px;cursor:pointer;transition:background 0.2s; border: 1px solid var(--accent1);" onclick="openDemo('Empathy Guide')">
                            <div style="width:50px;height:50px;border-radius:8px;background:linear-gradient(135deg,var(--accent1),#00e676);display:flex;align-items:center;justify-content:center;font-weight:800;font-size:1.5rem; box-shadow:0 0 12px rgba(0, 255, 255, 0.8);">🤝</div>
                            <div>
                                <div class="muted small" style="color:var(--muted);">QUICK READ</div>
                                <div style="font-weight:700; color:var(--text-color); font-family:var(--font-body);">THE EMPATHY GUIDE: CONFLICT</div>
                            </div>
                        </div>
                        <div style="display:flex;gap:12px;align-items:center;background:var(--box-bg-color);padding:12px;border-radius:8px;cursor:pointer;transition:background 0.2s; border: 1px solid var(--accent2);" onclick="openDemo('Resilience Exercises')">
                            <div style="width:50px;height:50px;border-radius:8px;background:linear-gradient(135deg,var(--accent2),#ffcc80);display:flex;align-items:center;justify-content:center;font-weight:800;font-size:1.5rem; box-shadow:0 0 12px rgba(255, 0, 255, 0.8);">🧠</div>
                            <div>
                                <div class="muted small" style="color:var(--muted);">BOOST YOUR SPIRIT</div>
                                <div style="font-weight:700; color:var(--text-color); font-family:var(--font-body);">DAILY RESILIENCE EXERCISES</div>
                            </div>
                        </div>
                    </div>
                </aside>
                </div>
        </div>
    </header>

    <section id="mission" class="section reveal" aria-label="Our Mission" style="padding: 60px 8% 30px;">
        <h2>OUR CORE MISSION</h2>
        <p class="muted max-w-3xl" style="color:var(--muted); font-family:var(--font-body);">We provide tools for resilience and connection for anyone affected by bullying, ensuring no one has to face it alone. Our goal is to shift bystander culture into one of active allyship and support.</p>

        
        <div class="card-grid" style="margin-top:30px; display:flex; gap:20px; flex-wrap: wrap; justify-content:center;">
            <div class="card reveal panel" style="flex: 1 1 300px; border-color:var(--accent2);">
                <h3 style="color:var(--accent2);font-size:1.5rem; font-family:var(--font-heading);">EMPOWERMENT TOOLS</h3>
                <p class="muted" style="color:var(--muted); font-family:var(--font-body);">Access practical guides and scripts for standing up for yourself and advocating for others safely.</p>
            </div>
            <div class="card reveal panel" style="flex: 1 1 300px; border-color:var(--accent2);">
                <h3 style="color:var(--accent2);font-size:1.5rem; font-family:var(--font-heading);">RESILIENCE BUILDING</h3>
                <p class="muted" style="color:var(--muted); font-family:var(--font-body);">Interactive exercises and support resources focused on mental and emotional strength.</p>
            </div>
            <div class="card reveal panel" style="flex: 1 1 300px; border-color:var(--accent2);">
                <h3 style="color:var(--accent2);font-size:1.5rem; font-family:var(--font-heading);">COMMUNITY PLEDGES</h3>
                <p class="muted" style="color:var(--muted); font-family:var(--font-body);">Join thousands of users committed to kindness and zero-tolerance for bullying through action pledges.</p>
            </div>
        </div>
    </section>

    <section id="resources" class="section reveal" style="border-color: var(--accent1); padding: 30px 8% 60px;">
        <h2>THE 7E HUB RESOURCE CENTER</h2>
        <p class="muted max-w-3xl" style="color:var(--muted); font-family:var(--font-body);">Explore our curated collection of guides, toolkits, and interactive exercises designed to equip you with the knowledge to respond effectively to bullying.</p>

        <div style="margin-top:30px">
            
            <div class="game-panel reveal" onclick="window.location.href='adwiti.html#adwiti-story'">
                <div class="game-panel-content">
                    <h3 class="text-2xl" style="color:var(--accent1); font-family:var(--font-heading);">THE POWER TO STOP BULLYING: LESSONS FROM ADWITI’S STORY</h3>
                    <p class="muted" style="color:var(--muted); font-family:var(--font-body);">An in-depth article analyzing the skit and TEDx talk, focusing on confidence, smart responses, and the power of bystanders.</p>
                    <div style="margin-top:16px">
                        <button class="btn" style="padding:10px 20px; font-family:var(--font-body);">READ FULL ARTICLE</button>
                    </div>
                </div>
                <div class="game-panel-image" id="image-adwiti-container">
                    <img id="image-adwiti" src="adwiti.jpg" alt="Illustration of student gaining confidence" loading="lazy" style="display:block;">
                </div>
            </div>

            <div class="game-panel reveal" onclick="window.location.href='adwiti.html#tedx-summary'">
                <div class="game-panel-content">
                    <h3 class="text-2xl" style="color:var(--accent1); font-family:var(--font-heading);">HOW TO AVOID BULLYING AND WHY IT HAPPENS: TIPS FROM OUR TEDx SPEAKERS</h3>
                    <p class="muted" style="color:var(--muted); font-family:var(--font-body);">Tips from our speakers, Vedant and Nived on how to confront bullying, including the four reasons it happens and three ways to stop it.</p>
                    <div style="margin-top:16px">
                        <button class="btn" style="padding:10px 20px; font-family:var(--font-body);">ACCESS DOCUMENT</button>
                    </div>
                    </div>
                <div class="game-panel-image" id="image-allies-container">
                    <img id="image-allies" src="parents.jpg" alt="Illustration of parent and child talking" loading="lazy" style="display:block;">
                </div>
            </div>

            <div class="game-panel reveal" onclick="window.location.href='adwiti.html#assembly-summary'">
                <div class="game-panel-content">
                    <h3 class="text-2xl" style="color:var(--accent1); font-family:var(--font-heading);">7E'S ASSEMBLY SUMMARY: EMPATHY & ACTION</h3>
                    <p class="muted" style="color:var(--muted); font-family:var(--font-body);">A breakdown of the key points from our latest school assembly focusing on empathy, respect, and intervention strategies.</p>
                    <div style="margin-top:16px">
                        <button class="btn" style="padding:10px 20px; font-family:var(--font-body);">READ SUMMARY</button>
                    </div>
                </div>
                <div class="game-panel-image" id="image-empathy-container">
                    <img id="image-empathy" src="empathy.jpg" alt="Illustration of two people shaking hands" loading="lazy" style="display:block;">
                </div>
            </div>

            <div class="game-panel reveal" onclick="window.location.href='adwiti.html#resilience-toolkit'">
                <div class="game-panel-content">
                    <h3 class="text-2xl" style="color:var(--accent1); font-family:var(--font-heading);">THE RESILIENCE TOOLKIT: MENTAL WELLNESS</h3>
                    <p class="muted" style="color:var(--muted); font-family:var(--font-body);">A collection of exercises, like 5-4-3-2-1 grounding and positive self-talk scripting, to build and maintain emotional strength during challenging times.</p>
                    <div style="margin-top:16px">
                        <button class="btn-ghost" style="padding:10px 20px; font-family:var(--font-body);">VIEW EXERCISES</button>
                    </div>
                </div>
                <div class="game-panel-image" id="image-resilience-container">
                    <img id="image-resilience" src="mental.jpg" alt="Illustration of mental wellness/brain" loading="lazy" style="display:block;">
                </div>
            </div>

        </div>
    </section>

    <section id="pledge" style="background-color: var(--background); padding: 60px 20px; text-align: center; color: var(--text-color);">
        
        <h2 class="text-4xl font-extrabold mb-4" style="font-family: var(--font-heading); color: var(--accent1);">
            JOIN THE <span style="color: var(--accent2);">MOVEMENT</span>
        </h2>
        
        <p class="text-xl text-gray-400 mb-8 max-w-2xl mx-auto">
            Every  pledge , no matter how small, adds up to a global  wave of empathy . Commit to  kindness  today and see the total count grow instantly!
        </p>

        <div style="margin-bottom: 30px; padding: 20px; background: rgba(255, 255, 255, 0.05); border-radius: 12px; display: inline-block; box-shadow: 0 4px 10px rgba(0,0,0,0.2);">
            <div id="pledgeCounter" class="counter"
            style="font-size:4.5rem; font-family:var(--font-heading); font-weight:900; color:var(--accent2); line-height: 1; margin-bottom:-5px;">
                0
            </div>
            <p class="text-lg text-gray-400 font-bold mt-2">Total Kindness Pledges Committed</p>
        </div>

        <div style="margin-bottom: 40px; color: var(--text-color);">
            <p class="text-2xl font-bold" style="color: var(--text-color);">
                Our Goal: <span style="color: var(--accent1); font-size: 1.5em; font-weight: 900;">250,000</span> Pledges
            </p>
        </div>

        <div class="mt-6">
            <button onclick="openPledgeModal()" id="commitPledgeButton" class="btn btn-primary" style="padding: 15px 35px; font-size: 1.25rem; font-weight: 700; background-color: var(--accent1); color: black; border: none; border-radius: 8px; cursor: pointer; transition: background-color 0.3s;">
                COMMIT YOUR PLEDGE NOW
            </button>
        </div>

    </section>
	<div id="pledgeModal" class="modal-overlay" aria-hidden="true" style="display: none;">
        <div class="modal-content" style="background-color: var(--background2); border-radius: 12px; max-width: 500px; padding: 30px; position: relative;">
            
            <button onclick="closePledgeModal()" class="modal-close-btn" aria-label="Close Pledge Form" 
                    style="position: absolute; top: 15px; right: 15px; font-size: 1.5rem; line-height: 1; color: var(--text-color); background: none; border: none; cursor: pointer;">
                &times;
            </button>

            <h3 class="text-3xl font-extrabold mb-4" style="font-family: var(--font-heading); color: var(--accent1);">
                Your Kindness Pledge
            </h3>
            
            <p class="text-gray-400 mb-6">
                Commit to one action you will take to promote empathy or stand up against unkindness today.
            </p>

            <textarea id="pledgeInput" 
                      maxlength="200" 
                      placeholder="Example: 'I pledge to listen to a friend without interrupting today.'"
                      style="width: 100%; height: 120px; padding: 15px; border-radius: 8px; border: 1px solid var(--gray-700); background-color: var(--background); color: var(--text-color); resize: none;"></textarea>

            <div class="flex justify-between text-sm text-gray-500 mt-2">
                <p style="color: var(--text-color);">Minimum 10 characters required.</p>
                <p>Characters Remaining: <span id="pledgeCharCount">200</span></p>
            </div>

            <button onclick="submitPledge()" class="btn" style="margin-top: 25px; width: 100%; padding: 15px; font-size: 1.1rem; font-weight: 700; background-color: var(--accent1); color: black; border: none; border-radius: 8px; cursor: pointer;">
                SUBMIT MY PLEDGE
            </button>

            <p class="text-xs text-gray-500 mt-4">
                *Your pledge is anonymous and will only count toward the global total.
            </p>

        </div>
    </div>

    <div id="demoModal" class="modal-overlay" aria-hidden="true" style="display: none;">
        <div class="modal-content" style="background-color: var(--background2); border-radius: 12px; max-width: 700px; padding: 30px; position: relative;">
            <button onclick="closeDemo()" class="modal-close-btn" aria-label="Close Resource" 
                    style="position: absolute; top: 15px; right: 15px; font-size: 1.5rem; line-height: 1; color: var(--text-color); background: none; border: none; cursor: pointer;">
                &times;
            </button>
            <div id="demoContent" class="overflow-y-auto" style="max-height: 80vh;">
            </div>
        </div>
    </div>

    <style>
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000; /* Increased Z-Index for modal */
        }
    </style>
	

    <section id="testimonials" class="section reveal" style="border-color: var(--accent1);">
        <h2>SUPPORTER TESTIMONIALS</h2>
        <div class="reviews-container" style="display:grid; grid-template-columns:repeat(auto-fit, minmax(280px, 1fr)); gap:20px; margin-top:20px;">
            <div class="review-card reveal panel" style="border-color: var(--accent1);">
                <h4 class="font-bold text-xl" style="color:var(--accent1); font-family:var(--font-heading);">Nived N</h4>
                <p style="color:var(--text-color); font-family:var(--font-body);">“7E Hub gave me the courage to talk about what was happening. I felt truly heard and supported through the tools.”</p>
                <div style="color:var(--muted); font-size:0.9rem; font-family:var(--font-body);">— SAFE SPACE USER</div>
            </div>
            <div class="review-card reveal panel" style="border-color: var(--accent1);">
                <h4 class="font-bold text-xl" style="color:var(--accent1); font-family:var(--font-heading);">Vedant S.</h4>
                <p style="color:var(--text-color); font-family:var(--font-body);">“The Empathy Guide helped me understand how to be a better friend to someone struggling. It changed my approach entirely.”</p>
                <div style="color:var(--muted); font-size:0.9rem; font-family:var(--font-body);">— EMPOWERMENT SUPPORTER</div>
            </div>
            <div class="review-card reveal panel" style="border-color: var(--accent1);">
                <h4 class="font-bold text-xl" style="color:var(--accent1); font-family:var(--font-heading);">KSHITHIJ</h4>
                <p style="color:var(--text-color); font-family:var(--font-body);">“The Resilience Toolkit was a game-changer. I feel much more equipped to handle negative situations now.”</p>
                <div style="color:var(--muted); font-size:0.9rem; font-family:var(--font-body);">— RESILIENCE BUILDER</div>
            </div>
        </div>
    </section>

    <section id="faq" class="section reveal" style="border-color: var(--accent2);">
        <h2>FAQ: COMMON INQUIRIES</h2>
        <div style="margin-top:30px; display:grid; gap:15px;">
            
            <div class="faq-item reveal">
                <button class="faq-question panel" aria-expanded="false" style="width:100%; text-align:left; display:flex; justify-content:space-between; align-items:center; background:var(--box-bg-color); cursor:pointer; font-family:var(--font-body); padding:15px 24px;">
                    <span style="font-weight:700; color:var(--text-color); font-size:1.1rem;">Q: Is the 7E Hub platform truly anonymous?</span>
                    <span style="font-size:1.5rem; color:var(--accent2); transform: rotate(0deg); transition: transform 0.3s ease;">+</span>
                </button>
                <div class="panel" role="region">
                    <p style="color:var(--muted); font-family:var(--font-body);">A: Yes. All user pledges and core interactions are designed to be completely anonymous. We focus on collective action and data, not individual identity.</p>
                </div>
            </div>
            
            <div class="faq-item reveal">
                <button class="faq-question panel" aria-expanded="false" style="width:100%; text-align:left; display:flex; justify-content:space-between; align-items:center; background:var(--box-bg-color); cursor:pointer; font-family:var(--font-body); padding:15px 24px;">
                    <span style="font-weight:700; color:var(--text-color); font-size:1.1rem;">Q: How can I become an active Ally in my community?</span>
                    <span style="font-size:1.5rem; color:var(--accent2); transition: transform 0.3s ease;">+</span>
                </button>
                <div class="panel" role="region">
                    <p style="color:var(--muted); font-family:var(--font-body);">A: Start by reviewing the '3 D's' in the Assembly Summary (Direct, Distract, Delegate). The key is to shift from being a passive observer to an active intervener. The Hub's resources offer scripts and safe intervention techniques.</p>
                </div>
            </div>
            
            <div class="faq-item reveal">
                <button class="faq-question panel" aria-expanded="false" style="width:100%; text-align:left; display:flex; justify-content:space-between; align-items:center; background:var(--box-bg-color); cursor:pointer; font-family:var(--font-body); padding:15px 24px;">
                    <span style="font-weight:700; color:var(--text-color); font-size:1.1rem;">Q: Is there an age limit for using the 7E Hub resources?</span>
                    <span style="font-size:1.5rem; color:var(--accent2); transition: transform 0.3s ease;">+</span>
                </button>
                <div class="panel" role="region">
                    <p style="color:var(--muted); font-family:var(--font-body);">A: The resources are designed for students (middle and high school age) but are highly relevant for parents, teachers, and anyone interested in promoting empathy and resilience.</p>
                </div>
            </div>

        </div>
    </section>

    <footer style="padding: 30px 8%; background-color: var(--bg-color); border-top: 1px solid var(--accent2);">
        <div style="max-width: var(--max-width); margin: 0 auto; display: flex; justify-content: space-between; align-items: center; color: var(--muted); font-size: 0.9rem; font-family: var(--font-body);">
            <div style="text-align:left;">
                &copy; 2024 7E Hub. All Rights Reserved.
            </div>
            <div style="text-align:right; display:flex; gap:15px;">
                <a href="#" style="color: var(--muted); text-decoration: none;">Privacy Policy</a> | 
                <a href="#" style="color: var(--muted); text-decoration: none;">Terms of Use</a>
            </div>
        </div>
    </footer>

    <div id="tempMessage" style="position:fixed; bottom:20px; left:50%; transform:translateX(-50%); padding:12px 25px; border-radius:6px; font-family:var(--font-heading); font-weight:700; z-index:10000; opacity:0; transition:opacity 0.4s ease, bottom 0.4s ease; display:none;"></div>

    <script>
        // =============================================================
        // === GLOBAL UTILITY FUNCTIONS (Non-module script) ===
        // =============================================================

        // --- SCROLLING ---
        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        }

        // --- MOBILE MENU ---
        function toggleMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            const isOpen = menu.classList.toggle('open');
            document.body.style.overflow = isOpen ? 'hidden' : 'auto';
            menu.setAttribute('aria-hidden', !isOpen);
        }

        // --- PLEDGE MODAL (UI) ---
        function openPledgeModal() {
            document.getElementById('pledgeModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closePledgeModal() {
            document.getElementById('pledgeModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // --- DEMO/ARTICLE MODAL (UPDATED with new content display logic) ---
        function closeDemo() {
            document.getElementById('demoModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function openDemo(name) {
            const modal = document.getElementById('demoModal');
            const content = document.getElementById('demoContent');
            let title = '';
            let externalUrl = '';
            let contentHTML = '';

            // --- ARTICLE CONTENT DEFINITIONS (Newsletter Style) ---

            if (name === 'The Power to Stop Bullying') {
                title = 'The Power to Stop Bullying: Lessons from Adwiti’s Story';
                externalUrl = 'https://hub.7e.com/guides/adwiti-story';
                contentHTML = `
                    <div class="article-content-wrapper">
                        <h3 style="font-family:var(--font-heading);" class="text-4xl font-extrabold glowing-text text-cyan-400 mb-6 border-b pb-3 border-gray-700">${title.toUpperCase()}</h3>
                        
                        <p class="muted mb-8 text-xl" style="color:var(--muted); font-style: italic; border-left: 3px solid var(--accent2); padding-left: 15px;">The definitive guide to how a victim took back her power—and how you can too.</p>

                        <p class="text-gray-300 mb-6">Adwiti was pushed to a breaking point by Deeksha's constant bullying, which impacted her academic performance and confidence. But when she finally decided to stop being &quot;Deeksha's puppet,&quot; she successfully defeated her aggressor using a combination of powerful psychological tactics.</p>

                        <h4 style="font-family:var(--font-heading);" class="text-2xl font-bold mt-8 mb-3 text-cyan-400 glowing-text">The 4 Key Tactics Adwiti Used (Interactive)</h4>
                        
                        <div class="key-tactics-grid mt-6 mb-8">
                            <div class="tactic-card tactic-1 reveal">
                                <h5 class="tactic-title">1. Inner Confidence 🌟</h5>
                                <p class="tactic-body">Adwiti consciously chose to let her confidence speak. A bully feeds on panic and fear;  denying that reaction is the first defeat. </p>
                            </div>
                            <div class="tactic-card tactic-2 reveal" style="transition-delay: 0.1s;">
                                <h5 class="tactic-title">2. The Ally Effect (Support) 🤝</h5>
                                <p class="tactic-body">Crucially, the bystanders refused to support Deeksha. Bullying cannot survive without an audience.  Their visible support isolated the bully. </p>
                            </div>
                            <div class="tactic-card tactic-3 reveal" style="transition-delay: 0.2s;">
                                <h5 class="tactic-title">3. Calmness &amp; Composure 🧘</h5>
                                <p class="tactic-body">Adwiti stayed calm, refusing to give the emotional outburst Deeksha was seeking. This made the bully's actions look  desperate and weak. </p>
                            </div>
                            <div class="tactic-card tactic-4 reveal" style="transition-delay: 0.3s;">
                                <h5 class="tactic-title">4. The Smart Question (Turning the Tables) 🗣️</h5>
                                <p class="tactic-body">Adwiti delivered the final blow by questioning the bully's motivation. This simple question forced Deeksha to  explain her toxic behavior. </p>
                            </div>
                        </div>

                        <h4 style="font-family:var(--font-heading);" class="text-2xl font-bold mt-8 mb-3 text-cyan-400 glowing-text">The Lesson: The Power is Yours</h4>
                        <p class="text-gray-300">We learn that the power to stop bullying lies not with the aggressor, but with the victim and the bystanders. By adopting  Confidence, Calmness, Support, and Smart Questions , you take the three weapons—support, fear, and control—away from the bully for good.</p>
                        
                        <div class="mt-8 text-center p-4" style="border:2px solid var(--accent2); border-radius:8px; background-color:rgba(255, 0, 255, 0.1);">
                            <p class="text-2xl font-bold text-white mb-2 glowing-text" style="color:var(--accent2);">ACTION STEP:</p>
                            <p class="text-xl font-bold text-white">You have the power to be an  Ally  and to be  Unstoppable. </p>
                        </div>
                    </div>
                `;
            } 
            
            else if (name === 'Bullying Talk Article') {
                title = 'HOW TO AVOID BULLYING AND WHY IT HAPPENS: TIPS FROM OUR TEDx SPEAKERS';
                externalUrl = 'https://hub.7e.com/guides/tedx-summary';
                contentHTML = `
                    <div class="article-content-wrapper">
                        <h3 style="font-family:var(--font-heading);" class="text-4xl font-extrabold glowing-text text-cyan-400 mb-6 border-b pb-3 border-gray-700">${title.toUpperCase()}</h3>
                        <p class="muted mb-6 text-lg" style="color:var(--muted); border-left: 3px solid #ff44aa; padding-left: 15px;">Tips from our speakers, Vedant and Nived on how to confront bullying, including the four reasons it happens and three ways to stop it.</p>

                        <h4 style="font-family:var(--font-heading);" class="text-2xl font-bold mt-8 mb-3 text-cyan-400 glowing-text">The 4 Roots of Bullying Behavior</h4>
                        <ul class="list-disc list-inside text-gray-300 ml-4 mb-6">
                            <li class="mb-2"><span class="font-bold text-white">Need for Control:</span> Bullies often feel powerless in their own lives.</li>
                            <li class="mb-2"><span class="font-bold text-white">Lack of Empathy:</span> They struggle to connect with the emotional pain they inflict.</li>
                            <li class="mb-2"><span class="font-bold text-white">Peer Pressure:</span> They seek status and popularity from an audience.</li>
                            <li><span class="font-bold text-white">History of Victimization:</span> Some bullies were once victims, perpetuating the cycle.</li>
                        </ul>
                        
                        <div class="p-6 rounded-lg my-8" style="background-color:rgba(0, 255, 255, 0.1); border: 2px dashed var(--accent1);">
                            <h4 style="font-family:var(--font-heading);" class="text-2xl font-bold mb-3 text-white glowing-text">3 Ways to Defuse the Situation</h4>
                            <p class="text-lg text-white">
                                 1. The "I Don't Care" Response:  A simple, calm dismissal of the attack.<br>
                                 2. The Unexpected Ally:  Stepping in to support the victim changes the power dynamic.<br>
                                 3. The Question:  Asking a simple, direct question forces the bully to justify their action.
                            </p>
                        </div>
                    </div>
                `;
            } 
            
            else if (name === 'Assembly Summary') {
                title = "7E'S ASSEMBLY SUMMARY: EMPATHY & ACTION";
                externalUrl = 'https://hub.7e.com/guides/assembly-summary';
                contentHTML = `
                    <div class="article-content-wrapper">
                        <h3 style="font-family:var(--font-heading);" class="text-4xl font-extrabold glowing-text text-cyan-400 mb-6 border-b pb-3 border-gray-700">${title.toUpperCase()}</h3>
                        <p class="muted mb-6 text-lg" style="color:var(--muted); border-left: 3px solid var(--accent1); padding-left: 15px;">Key takeaways from our latest school presentation on building an active, supportive community.</p>

                        <h4 style="font-family:var(--font-heading);" class="text-2xl font-bold mt-8 mb-3 text-cyan-400 glowing-text">The Bystander Shift: From Passive to Ally</h4>
                        <p class="text-gray-300 mb-6">The biggest impact on bullying is not the victim's reaction, but the  bystander's action . If the audience turns against the aggressor, the bullying stops.</p>

                        <div class="p-6 rounded-lg my-8" style="background-color:rgba(255, 0, 255, 0.1); border: 2px dashed var(--accent2);">
                            <h4 style="font-family:var(--font-heading);" class="text-2xl font-bold mb-3 text-white glowing-text">Action Strategy: The 3 D's</h4>
                            <ul class="list-disc list-inside text-lg text-white ml-4">
                                <li class="font-bold">Direct: Firmly tell the bully to stop.</li>
                                <li class="font-bold">Distract: Change the subject or pull the victim away.</li>
                                <li class="font-bold">Delegate: Get help from a teacher, parent, or trusted adult.</li>
                            </ul>
                        </div>
                    </div>
                `;
            }
            
            else if (name === 'Resilience Exercises') {
                title = 'The Resilience Toolkit: Mental Wellness';
                externalUrl = 'https://hub.7e.com/toolkit/resilience';
                contentHTML = `
                    <div class="article-content-wrapper">
                        <h3 style="font-family:var(--font-heading);" class="text-4xl font-extrabold glowing-text text-cyan-400 mb-6 border-b pb-3 border-gray-700">${title.toUpperCase()}: BUILDING YOUR INNER STRENGTH</h3>
                        <p class="muted mb-6 text-lg" style="color:var(--muted); border-left: 3px solid #00ff00; padding-left: 15px;">Resilience is a learned skill. Use these quick exercises daily to build emotional stability and mental toughness.</p>

                        <h4 style="font-family:var(--font-heading);" class="text-2xl font-bold mt-8 mb-3 text-cyan-400 glowing-text">1. 5-4-3-2-1 GROUNDING TECHNIQUE (1 MINUTE)</h4>
                        <div class="p-4 rounded-lg border border-cyan-500/50 mb-6" style="background-color:rgba(0, 255, 255, 0.05);">
                            <p class="text-lg text-white font-mono">
                                 5  things you can <span style="color:var(--accent2); font-weight:bold;">SEE</span><br>
                                 4  things you can <span style="color:var(--accent1); font-weight:bold;">FEEL</span><br>
                                 3  things you can <span style="color:var(--accent2); font-weight:bold;">HEAR</span><br>
                                 2  things you can <span style="color:#00ff00; font-weight:bold;">SMELL</span><br>
                                 1  thing you can <span style="color:var(--accent1); font-weight:bold;">TASTE</span>
                            </p>
                        </div>

                        <h4 style="font-family:var(--font-heading);" class="text-2xl font-bold mt-8 mb-3 text-cyan-400 glowing-text">2. POSITIVE SELF-TALK SCRIPTING (2 MINUTES)</h4>
                        <p class="text-gray-300">Counter negative internal dialog with prepared, positive affirmations:</p>
                        <div class="text-lg text-white font-mono mt-3 p-4 rounded-lg border border-cyan-500/50" style="background-color:rgba(255, 0, 255, 0.05);">
                            <p style="font-family:var(--font-heading); font-size:1.5rem; color:var(--accent1); text-shadow:0 0 10px var(--accent1);">"I AM CAPABLE. THIS FEELING IS TEMPORARY. I AM STRONG ENOUGH TO HANDLE THIS."</p>
                        </div>
                    </div>
                `;
            }
            
            else if (name === 'Empathy Guide') {
                title = 'The Empathy Guide: Conflict Resolution';
                externalUrl = 'https://hub.7e.com/guides/empathy-conflict';
                contentHTML = `
                    <div class="article-content-wrapper">
                        <h3 style="font-family:var(--font-heading);" class="text-4xl font-extrabold glowing-text text-cyan-400 mb-6 border-b pb-3 border-gray-700">${title.toUpperCase()}</h3>
                        <p class="muted mb-6 text-lg" style="color:var(--muted); border-left: 3px solid var(--accent2); padding-left: 15px;">A short guide on how to approach conflicts with empathy to find constructive solutions, not just assign blame.</p>

                        <h4 style="font-family:var(--font-heading);" class="text-2xl font-bold mt-8 mb-3 text-cyan-400 glowing-text">1. LISTEN TO UNDERSTAND, NOT TO REPLY</h4>
                        <p class="text-gray-300">The first step is active listening. Focus on the other person's perspective, even if you disagree. This helps de-escalate emotional responses.</p>
                        
                        <h4 style="font-family:var(--font-heading);" class="text-2xl font-bold mt-8 mb-3 text-cyan-400 glowing-text">2. VALIDATE FEELINGS, ADDRESS BEHAVIOR</h4>
                        <p class="text-gray-300">Acknowledge that their feelings are real ("I hear that you are frustrated"), but firmly address unacceptable behavior. Feelings are valid; harmful actions are not.</p>
                    </div>
                `;
            }

            // --- COMMON MODAL STRUCTURE ---
            modal.style.display = 'flex';
            content.innerHTML = `
                <div style="font-family: var(--font-body); padding: 10px;">
                    ${contentHTML}
                    
                    
                </div>
            `;

            document.body.style.overflow = 'hidden';

            if (document.getElementById('mobileMenu')?.classList.contains('open')) {
                toggleMobileMenu();
            }
            
            // RE-OBSERVE REVEAL ELEMENTS (Crucial for the animation inside the modal)
            const revealObserver = new IntersectionObserver((entries) => {
                entries.forEach(e => {
                    if (e.isIntersecting) {
                        e.target.classList.add('visible');
                        revealObserver.unobserve(e.target);
                    }
                });
            }, { threshold: 0.18 });
            content.querySelectorAll('.reveal').forEach(el => revealObserver.observe(el));
        }

        // --- DYNAMIC CHALLENGE / TEMP MESSAGE ---
        const challenges = [
            "Challenge: Compliment someone you usually ignore today.",
            "Affirmation: I have the right to feel safe and respected.",
            "Challenge: Practice the 5-4-3-2-1 grounding technique now.",
            "Affirmation: My voice matters, and I will use it for good.",
            "Challenge: Write down three things you are grateful for today."
        ];
        
        function handleChallengeClick(event) {
            // Prevent button click from bubbling up and re-running the main click
            if (event && event.target.tagName === 'BUTTON') {
                event.stopPropagation();
            }
            startDynamicChallenge();
        }

        function startDynamicChallenge() {
            const el = document.getElementById('challengeQuestion');
            const newChallenge = challenges[Math.floor(Math.random() * challenges.length)];
            
            // Simple fade out/in effect
            el.style.opacity = '0';
            setTimeout(() => {
                el.textContent = newChallenge;
                el.style.opacity = '1';
            }, 300);
        }

        function showTempMessage(message, color = 'var(--accent1)') {
            const el = document.getElementById('tempMessage');
            el.textContent = message;
            el.style.backgroundColor = color;
            el.style.color = '#000';
            el.style.display = 'block';
            
            // Animate in
            el.style.opacity = '1';
            el.style.bottom = '40px'; 

            // Animate out after 3 seconds
            setTimeout(() => {
                el.style.opacity = '0';
                el.style.bottom = '20px';
                setTimeout(() => el.style.display = 'none', 500);
            }, 3000);
        }
        window.showTempMessage = showTempMessage; // Expose to the module script

        // --- PLEDGE INPUT TRACKER ---
        function setupPledgeInput() {
            const input = document.getElementById('pledgeInput');
            const countDisplay = document.getElementById('pledgeCharCount');
            const maxLength = 200;

            if (input && countDisplay) {
                input.addEventListener('input', () => {
                    const currentLength = input.value.length;
                    const remaining = maxLength - currentLength;
                    countDisplay.textContent = remaining;
                });
            }
        }
        window.setupPledgeInput = setupPledgeInput; // Expose to the module script

        // --- Setup interactions on DOM Load ---
        (function randomizeCompliments() {
            const container = document.querySelector('.floating-compliments');
            const totalCompliments = 70;
            const compliments = [
                "KINDNESS", "STRONG", "EMPATHY", "ALLY", "VALUABLE",
                "BRAVE", "HEARD", "SEEN", "WORTHY", "RESILIENT",
                "SAFE", "LOVE", "SUPPORT", "HOPE", "ACTION", "VOICE",
                "GROW", "TRUST", "VALUE", "SHINE", "POWER", "CARE", "HEAL",
                "PEACE", "TRUTH"
            ];

            for (let i = 0; i < totalCompliments; i++) {
                const complimentText = compliments[Math.floor(Math.random() * compliments.length)];
                let div = document.createElement('div');
                div.textContent = complimentText;

                const startX = Math.random() * 100;
                const startY = Math.random() * 100;

                const movementRange = 30;
                const endX = startX + (Math.random() * movementRange - movementRange / 2);
                const endY = startY + (Math.random() * movementRange - movementRange / 2);

                div.style.left = `${startX}vw`;
                div.style.top = `${startY}vh`;

                div.style.setProperty('--x-start', '0');
                div.style.setProperty('--y-start', '0');
                div.style.setProperty('--x-end', `${(endX - startX)}vw`);
                div.style.setProperty('--y-end', `${(endY - startY)}vh`);

                div.style.animationDuration = `${Math.random() * 10 + 20}s`;
                div.style.animationDelay = `-${Math.random() * 30}s`;

                container.appendChild(div);
            }
        })();

        (function setupInteractions() {
            // Scroll Reveal Logic
            const revealObserver = new IntersectionObserver((entries) => {
                entries.forEach(e => {
                    if (e.isIntersecting) {
                        e.target.classList.add('visible');
                        revealObserver.unobserve(e.target);
                    }
                });
            }, { threshold: 0.18 });
            document.querySelectorAll('.reveal').forEach(el => revealObserver.observe(el));


            // FAQ Accordion Logic
            document.querySelectorAll('.faq-question').forEach(btn => {
                btn.addEventListener('click', () => {
                    const parent = btn.parentElement;
                    const isOpen = parent.classList.contains('open');

                    document.querySelectorAll('.faq-item.open').forEach(el => {
                        if (el !== parent) {
                            el.classList.remove('open');
                            const qBtn = el.querySelector('.faq-question');
                            if (qBtn) qBtn.setAttribute('aria-expanded', 'false');
                        }
                    });

                    if (!isOpen) {
                        parent.classList.add('open');
                        btn.setAttribute('aria-expanded', 'true');
                    } else {
                        parent.classList.remove('open');
                        btn.setAttribute('aria-expanded', 'false');
                    }
                });
            });

            
                if (e.key === 'Escape') {
                    closeDemo();
                    closePledgeModal();
                    if (document.getElementById('mobileMenu')?.classList.contains('open')) {
                        toggleMobileMenu();
                    }
                }
            });
        })();
    </script>
    
    <script type="module">
        // =============================================================
        // FIREBASE MODULE SCRIPT (Handles Real-time Data and Submission)
        // =============================================================

        // 1. IMPORT NECESSARY FIREBASE LIBRARIES
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getFirestore, doc, updateDoc, increment, onSnapshot, setDoc, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

        // 2. YOUR WEB APP'S FIREBASE CONFIGURATION
        const firebaseConfig = {
            apiKey: "AIzaSyBtfjuTXtH86ax7ejGCRbTOiJ7Z0GB7qkM",
            authDomain: "e-hub-55cb3.firebaseapp.com",
            projectId: "e-hub-55cb3",
            storageBucket: "e-hub-55cb3.firebasestorage.app",
            messagingSenderId: "821272803077",
            appId: "1:821272803077:web:2a80cf8c142d3b9fc4296c",
            measurementId: "G-BEH7L835MN"
        };

        // 3. INITIALIZE FIREBASE & FIRESTORE
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // 4. DEFINE FIRESTORE DOCUMENT REFERENCE
        const counterRef = doc(db, 'globalCounters', 'pledgeCounterDoc');

        let currentPledges = 0; // Global variable to hold the latest count

        // 5. CORE PLEDGE LOGIC FUNCTIONS

         
         
        function updatePledgeDisplay() {
            // 1. Primary Counter (in the Pledge section)
            const primaryCounterEl = document.getElementById('pledgeCounter');
            
            // Update the main counter
            if (primaryCounterEl) {
                primaryCounterEl.textContent = currentPledges.toLocaleString();
            }

            console.log("Display updated. Current count:", currentPledges);
        }

        
        window.submitPledge = async function() {
            const input = document.getElementById('pledgeInput');
            const pledgeText = input.value.trim();

            if (pledgeText.length < 10) {
                window.showTempMessage("PLEDGE MUST BE AT LEAST 10 CHARACTERS LONG!", '#ff4444');
                return;
            }

            try {
                window.closePledgeModal();
                window.showTempMessage("PROCESSING PLEDGE...", 'var(--accent1)');

                // ----------------------------------------------------
                // A. COUNTER UPDATE (Updates the total count)
                // ----------------------------------------------------
                try {
                    await updateDoc(counterRef, {
                        pledgeCount: increment(1)
                    });
                } catch (error) {
                    // Document not found (first run), so we create it
                    if (error.code === 'not-found' || error.message.includes('No document to update')) {
                        await setDoc(counterRef, {
                            pledgeCount: 1
                        });
                    } else {
                        throw error;
                    }
                }

                // ----------------------------------------------------
                // B. PLEDGE TEXT SAVE (Saves the actual text to a new collection)
                // ----------------------------------------------------
                const pledgesCollectionRef = collection(db, 'userPledges');
                await addDoc(pledgesCollectionRef, {
                    pledge: pledgeText,
                    timestamp: new Date().toISOString() // Saves when it was submitted
                });
                // ----------------------------------------------------

                window.showTempMessage("THANK YOU! YOUR PLEDGE HAS BEEN REGISTERED.", 'var(--accent1)');

            } catch (error) {
                console.error("Error submitting pledge: ", error);
                window.showTempMessage("PLEDGE ERROR: Check Console/Database setup.", '#ff4444');
            }
        }

         
         /* Listens in real-time for any changes to the counter in the database.
         */
        function startPledgeListener() {
            // onSnapshot establishes a real-time connection to the document
            onSnapshot(counterRef, (docSnapshot) => {
                if (docSnapshot.exists()) {
                    // Get the data and update the global variable
                    currentPledges = docSnapshot.data().pledgeCount || 0;
                    updatePledgeDisplay(); // Refresh the counter display on the page
                } else {
                    // Document not found (first time running), initialize to 0
                    currentPledges = 0;
                    updatePledgeDisplay();
                    console.warn("Pledge Counter Document not found! Counter initialized to 0.");
                }
            }, (error) => {
                console.error("Firestore Listen failed:", error);
            });
        }

        // 6. INITIALIZATION: Start the listener on page load
        document.addEventListener('DOMContentLoaded', () => {
            // These functions are defined in the non-module script block, so they are accessed via window
            window.startDynamicChallenge();
            window.setupPledgeInput();

            // The one that gets the data and updates the display
            startPledgeListener();
        });
    </script>
</body>
</html>
